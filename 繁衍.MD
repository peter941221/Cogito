

# è¯„ä¼°ä¸å®Œæ•´ç¹è¡æŠ€æœ¯æ–‡æ¡£

---

## è¯„ä¼°ï¼šä½ çš„æ–¹æ¡ˆå“ªé‡Œå¯¹ï¼Œå“ªé‡Œéœ€è¦è°ƒæ•´

### å¯¹çš„éƒ¨åˆ†

```
âœ“ ä¸–ç•Œå†…äº¤é…ï¼ˆä¸æ˜¯åå°æ“ä½œï¼‰
  â†’ åˆ›é€ äº†çœŸå®çš„ç¤¾ä¼šé€‰æ‹©å‹åŠ›
  â†’ èƒ½å¦æ‰¾åˆ°é…å¶æˆä¸ºç”Ÿå­˜ç­–ç•¥çš„ä¸€éƒ¨åˆ†

âœ“ äº¤é…æ¶ˆè€—èƒ½é‡ï¼ˆç”Ÿå­˜ vs ç¹æ®–çš„æƒè¡¡ï¼‰
  â†’ è¿™æ­£æ˜¯ç”Ÿç‰©å­¦ä¸­çš„æ ¸å¿ƒtrade-off
  â†’ rç­–ç•¥ vs Kç­–ç•¥å¯èƒ½è‡ªç„¶æ¶Œç°

âœ“ è¿ç»­æ¨¡æ‹Ÿæ›¿ä»£å›ºå®šä»£é™…
  â†’ æ›´æ¥è¿‘çœŸå®ç”Ÿæ€
  â†’ ç§ç¾¤åŠ¨æ€æˆä¸ºæ¶Œç°ç°è±¡è€Œéé¢„è®¾

âœ“ ä¸€æ¡å‘½ + åªæœ‰åŸºå› ç»„é—ä¼ 
  â†’ ä¿æŒäº†é“å¾‹äºŒ

âœ“ æ¬²æœ›ä½œä¸ºç”Ÿç†é—¨æ§è€Œéè¡Œä¸ºç¼–ç 
  â†’ æ²¡æœ‰è¿åé“å¾‹ä¸€
  â†’ ç±»ä¼¼äºèƒ½é‡ä½ä¸èƒ½äº¤é…â€”â€”è¿™æ˜¯ç‰©ç†é™åˆ¶ä¸æ˜¯è¡Œä¸ºæŒ‡ä»¤
```

### éœ€è¦è°ƒæ•´çš„éƒ¨åˆ†

```
é—®é¢˜1ï¼šæ™ºèƒ½ä½“çœ‹ä¸åˆ°å…¶ä»–æ™ºèƒ½ä½“
  å½“å‰æ„Ÿå®˜ç³»ç»Ÿçš„7Ã—7è§†é‡ä¸­æ²¡æœ‰"å…¶ä»–ä¸ªä½“"è¿™ä¸ªç±»åˆ«
  æ™ºèƒ½ä½“ä¸çŸ¥é“æ—è¾¹æœ‰å…¶ä»–ç”Ÿç‰©
  å®ƒæ€ä¹ˆ"å­¦ä¼š"æ¥è¿‘é…å¶ï¼Ÿ
  â†’ å¿…é¡»æ‰©å±•æ„Ÿå®˜ç³»ç»Ÿ

é—®é¢˜2ï¼šäº¤é…æ˜¯å…¨è‡ªåŠ¨çš„ï¼Œæ™ºèƒ½ä½“æ²¡æœ‰é€‰æ‹©æƒ
  å½“å‰è®¾è®¡ï¼šä¸¤ä¸ªç¬¦åˆæ¡ä»¶çš„å¼‚æ€§ç›¸é‚» â†’ è‡ªåŠ¨å¼€å§‹äº¤é…
  æ™ºèƒ½ä½“æ²¡æœ‰"é€‰æ‹©"äº¤é…çš„èƒ½åŠ›
  è¿™ç­‰äºä½ åœ¨ç¼–ç¨‹"é‡åˆ°å°±äº¤é…"çš„è¡Œä¸º
  â†’ åº”è¯¥è®©äº¤é…æˆä¸ºæ™ºèƒ½ä½“çš„å¯é€‰åŠ¨ä½œ
  â†’ æ™ºèƒ½ä½“å¯ä»¥"æ‹’ç»"äº¤é…
  â†’ è¿™æ ·é€‰æ‹©äº¤é…å°±æ˜¯æ¶Œç°çš„è¡Œä¸ºè€Œéè‡ªåŠ¨è§„åˆ™

é—®é¢˜3ï¼šäº¤é…æœŸé—´å®Œå…¨ä¸èƒ½åŠ¨
  5æ­¥å®Œå…¨é™æ­¢ â†’ æåº¦å±é™©ï¼ˆå¯èƒ½è¢«é¥¿æ­»æˆ–æ€æ­»ï¼‰
  è¿™è®©äº¤é…å˜æˆæé«˜é£é™©äº‹ä»¶
  â†’ å¯ä»¥ä¿ç•™ï¼Œä½†éœ€è¦æ„è¯†åˆ°è¿™åˆ›é€ äº†æç«¯çš„é€‰æ‹©å‹åŠ›
  â†’ æˆ–è€…ç¼©çŸ­äº¤é…æ—¶é—´

é—®é¢˜4ï¼šlibidoå…¬å¼ä¸­çš„age_factoræœ‰é—®é¢˜
  age_factor = 1.0 - abs(age - MATURITY_AGE*2) / MATURITY_AGE
  å½“MATURITY_AGE=200æ—¶ï¼Œpeakåœ¨age=400
  age=600æ—¶factor=0ï¼Œä¹‹åæ°¸è¿œä¸æƒ³äº¤é…ï¼Ÿ
  â†’ éœ€è¦ä¿®æ­£

é—®é¢˜5ï¼šé…å¶æ­»äº¡ä¸­æ–­çš„å¤„ç†ç¼ºå¤±
  å¦‚æœäº¤é…è¿‡ç¨‹ä¸­ä¸€æ–¹æ­»äº¡ï¼ˆèƒ½é‡è€—å°½/è¿›å…¥å±é™©åŒºï¼‰
  å¦ä¸€æ–¹çš„çŠ¶æ€æ€ä¹ˆåŠï¼Ÿ
  â†’ éœ€è¦æ˜ç¡®çš„ä¸­æ–­å¤„ç†

é—®é¢˜6ï¼šç¼ºå°‘ç§ç¾¤ç­ç»ä¿æŠ¤
  å¦‚æœæ­»äº¡ç‡æŒç»­é«˜äºå‡ºç”Ÿç‡
  ç§ç¾¤ä¼šç­ç»
  â†’ éœ€è¦æŸç§æœºåˆ¶é˜²æ­¢å®Œå…¨ç­ç»
  â†’ æˆ–è€…æ¥å—ç­ç»ä½œä¸ºæœ‰æ•ˆç»“æœ
```

---

---

# Project Genesis ç¹è¡æ¨¡å—å®Œæ•´æŠ€æœ¯æ–‡æ¡£ v1.0

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šè®¾è®¡åŸåˆ™

### 1.1 ç¹è¡åœ¨Genesisä¸­çš„è§’è‰²

```
ç¹è¡ä¸åªæ˜¯"è¿›åŒ–çš„æœºåˆ¶"
ç¹è¡æ˜¯ä¸–ç•Œä¸­æœ€å¤æ‚çš„ç¤¾ä¼šè¡Œä¸º

ä¸€ä¸ªæ™ºèƒ½ä½“è¦æˆåŠŸç¹æ®–ï¼Œéœ€è¦ï¼š
  1. æ´»ç€ï¼ˆåŸºæœ¬ç”Ÿå­˜ï¼‰
  2. åƒå¤Ÿé£Ÿç‰©ï¼ˆèƒ½é‡å……è¶³ï¼‰
  3. æ„ŸçŸ¥åˆ°å…¶ä»–ä¸ªä½“ï¼ˆç¤¾ä¼šæ„ŸçŸ¥ï¼‰
  4. ç§»åŠ¨åˆ°é…å¶é™„è¿‘ï¼ˆå¯¼èˆªèƒ½åŠ›ï¼‰
  5. é€‰æ‹©äº¤é…è€Œéå…¶ä»–åŠ¨ä½œï¼ˆå†³ç­–èƒ½åŠ›ï¼‰
  6. åœ¨äº¤é…æœŸé—´å­˜æ´»ï¼ˆé£é™©ç®¡ç†ï¼‰

è¿™äº›èƒ½åŠ›å…¨éƒ¨è¦ä»å­¦ä¹ å’Œè¿›åŒ–ä¸­æ¶Œç°
ä¸èƒ½é¢„ç¼–ç¨‹ä»»ä½•ä¸€ä¸ª
```

### 1.2 ä¸é“å¾‹çš„ä¸€è‡´æ€§æ£€æŸ¥

```
é“å¾‹ä¸€ï¼šåŸºå› ç»„ç¼–ç ç»“æ„ï¼Œä¸ç¼–ç è¡Œä¸º
  âœ“ åŸºå› ç»„ä¸åŒ…å« mating_preference, social_tendency ç­‰
  âœ“ äº¤é…æ˜¯åŠ¨ä½œç©ºé—´ä¸­çš„ä¸€ä¸ªé€‰é¡¹
     æ™ºèƒ½ä½“é€šè¿‡å­¦ä¹ å†³å®šä½•æ—¶ä½¿ç”¨å®ƒ
  âœ“ libido æ˜¯ç”Ÿç†çŠ¶æ€ï¼ˆç±»ä¼¼èƒ½é‡ï¼‰ï¼Œä¸æ˜¯è¡Œä¸ºåå¥½

é“å¾‹äºŒï¼šä¸€æ¡å‘½
  âœ“ æ­»äº¡ = æ°¸ä¹…ç»ˆç»“
  âœ“ åªæœ‰åŸºå› ç»„ä¼ é€’
  âœ“ åä»£ä»é›¶å¼€å§‹å­¦ä¹ 

é“å¾‹ä¸‰ï¼šè¿›åŒ–ä¸çŸ¥é“æ„è¯†
  âœ“ é€‚åº”åº¦ä»ç„¶åªçœ‹ç”Ÿå­˜æŒ‡æ ‡
  âœ“ ç¹æ®–æˆåŠŸæ˜¯ç”Ÿå­˜æŒ‡æ ‡çš„è‡ªç„¶å»¶ä¼¸
     ï¼ˆèƒ½ç¹æ®– = æ´»å¤Ÿä¹… + èƒ½é‡è¶³ + èƒ½æ‰¾åˆ°é…å¶ï¼‰
```

### 1.3 æ ¸å¿ƒè®¾è®¡å†³ç­–

```
å†³ç­–1ï¼šäº¤é…æ˜¯åŠ¨ä½œï¼Œä¸æ˜¯è‡ªåŠ¨äº‹ä»¶
  æ™ºèƒ½ä½“çš„åŠ¨ä½œç©ºé—´ä»6ä¸ªæ‰©å±•åˆ°7ä¸ª
  ç¬¬7ä¸ªåŠ¨ä½œæ˜¯"äº¤äº’"(interact)
  å½“ä¸¤ä¸ªç¬¦åˆæ¡ä»¶çš„å¼‚æ€§ç›¸é‚»
  ä¸”åŒæ–¹éƒ½é€‰æ‹©"äº¤äº’"æ—¶
  äº¤é…æ‰ä¼šå‘ç”Ÿ
  
  ä¸ºä»€ä¹ˆï¼š
  å¦‚æœäº¤é…æ˜¯è‡ªåŠ¨çš„ï¼Œæ™ºèƒ½ä½“æ²¡æœ‰agency
  "é€‰æ‹©"äº¤é…è¿˜æ˜¯"é€‰æ‹©"ç»§ç»­è§…é£Ÿ
  æ˜¯ä¸€ä¸ªå¿…é¡»å­¦ä¹ çš„å†³ç­–
  è¿™ä¸ªå†³ç­–æœ¬èº«å¯èƒ½éœ€è¦æŸç§è‡ªæˆ‘æ¨¡å‹
  ï¼ˆ"æˆ‘èƒ½é‡å¤Ÿå—ï¼Ÿæˆ‘è¯¥ç¹æ®–è¿˜æ˜¯ç»§ç»­åƒï¼Ÿ"ï¼‰

å†³ç­–2ï¼šæ™ºèƒ½ä½“èƒ½çœ‹åˆ°å…¶ä»–ä¸ªä½“
  æ„Ÿå®˜ç³»ç»Ÿæ‰©å±•ï¼šåœ¨7Ã—7è§†é‡ä¸­
  èƒ½çœ‹åˆ°å…¶ä»–ä¸ªä½“çš„å­˜åœ¨å’ŒåŸºæœ¬å±æ€§
  è¿™æ˜¯ç¤¾ä¼šè¡Œä¸ºçš„å‰æ

å†³ç­–3ï¼šè¿ç»­æ¨¡æ‹Ÿï¼Œæ— å›ºå®šä»£é™…
  æ²¡æœ‰"ç¬¬Nä»£"çš„æ¦‚å¿µ
  ä¸ªä½“è‡ªç„¶å‡ºç”Ÿã€ç”Ÿæ´»ã€æ­»äº¡
  ç§ç¾¤å¤§å°ç”±ç”Ÿæ€åŠ¨æ€å†³å®š

å†³ç­–4ï¼šç®€åŒ–çš„äº¤é…è¿‡ç¨‹
  ä¸éœ€è¦5æ­¥çš„äº¤é…è¿‡ç¨‹
  äº¤é…æ˜¯ç¬æ—¶çš„ï¼ˆ1æ­¥å®Œæˆï¼‰
  ä½†æœ‰å†·å´æœŸå’Œèƒ½é‡æ¶ˆè€—
  ç®€åŒ–å¯ä»¥å‡å°‘è¾¹ç•Œæƒ…å†µçš„å¤„ç†
```

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šæ„Ÿå®˜ç³»ç»Ÿæ‰©å±•

### 2.1 æ–°å¢æ„Ÿå®˜é€šé“

```
åŸå§‹æ„Ÿå®˜è¾“å…¥ï¼ˆ170ç»´ï¼‰ï¼š
  ä½ç½® 0-97ï¼š  7Ã—7è§†é‡ Ã— 2é€šé“ï¼ˆåœ°å½¢ç±»å‹+è·ç¦»ï¼‰= 98
  ä½ç½® 98ï¼š    å½“å‰èƒ½é‡ï¼ˆå½’ä¸€åŒ–ï¼‰
  ä½ç½® 99-104ï¼šä¸Šä¸€æ­¥åŠ¨ä½œone-hotï¼ˆ6ç»´ï¼‰
  ä½ç½® 105ï¼š   ä¸Šä¸€æ­¥èƒ½é‡å˜åŒ–
  ä½ç½® 106-169ï¼šå›å£°é€šé“ï¼ˆå®éªŒäºŒç”¨ï¼Œ64ç»´ï¼‰

æ–°å¢ç¤¾ä¼šæ„Ÿå®˜é€šé“ï¼ˆ49ç»´ï¼‰ï¼š
  ä½ç½® 170-218ï¼š7Ã—7è§†é‡ä¸­æ¯æ ¼çš„ä¸ªä½“ä¿¡æ¯ = 49
  
  æ¯æ ¼çš„ä¸ªä½“ä¿¡æ¯ç¼–ç ï¼ˆ1ç»´ï¼‰ï¼š
    0.0 = æ— ä¸ªä½“
    0.2 = é›„æ€§å¹¼å¹´ä¸ªä½“
    0.4 = é›Œæ€§å¹¼å¹´ä¸ªä½“
    0.6 = é›„æ€§æˆå¹´ä¸ªä½“
    0.8 = é›Œæ€§æˆå¹´ä¸ªä½“
    1.0 = æ­£åœ¨äº¤é…ä¸­çš„ä¸ªä½“
  
  æ³¨æ„ï¼šä¸æš´éœ²å¯¹æ–¹çš„èƒ½é‡ã€åŸºå› ç»„ç­‰ä¿¡æ¯
  æ™ºèƒ½ä½“åªçŸ¥é“"é‚£é‡Œæœ‰ä¸€ä¸ªä»€ä¹ˆæ ·çš„ä¸ªä½“"
  ä¸çŸ¥é“å¯¹æ–¹æ˜¯å¦"æ„¿æ„"äº¤é…

æ–°å¢è‡ªèº«ç¹æ®–çŠ¶æ€é€šé“ï¼ˆ4ç»´ï¼‰ï¼š
  ä½ç½® 219ï¼šè‡ªèº«æ€§åˆ«ï¼ˆ0=é›„, 1=é›Œï¼‰
  ä½ç½® 220ï¼šæ˜¯å¦æˆå¹´ï¼ˆ0/1ï¼‰
  ä½ç½® 221ï¼šå†·å´æœŸçŠ¶æ€ï¼ˆå‰©ä½™æ­¥æ•°/MATING_COOLDOWN, å½’ä¸€åŒ–åˆ°0-1ï¼‰
  ä½ç½® 222ï¼šå½“å‰èƒ½é‡æ˜¯å¦è¶³å¤Ÿäº¤é…ï¼ˆ0/1ï¼‰

æ€»æ„Ÿå®˜è¾“å…¥ç»´åº¦ï¼š170 + 49 + 4 = 223

æ³¨æ„ï¼š
  ä¸æš´éœ²"libido"ç»™æ™ºèƒ½ä½“
  libidoæ˜¯åå°ç”Ÿç†è®¡ç®—
  æ™ºèƒ½ä½“åªçŸ¥é“è‡ªå·±æ˜¯å¦æ»¡è¶³å®¢è§‚æ¡ä»¶
  ï¼ˆæˆå¹´ã€èƒ½é‡è¶³ã€å†·å´å®Œï¼‰
  
  ä¸æš´éœ²"äº¤é…æ¬²æœ›"
  å¦‚æœæ™ºèƒ½ä½“å‘å±•å‡ºæŸç§"æƒ³è¦äº¤é…"çš„å†…éƒ¨çŠ¶æ€
  é‚£å¿…é¡»æ˜¯ä»å­¦ä¹ ä¸­æ¶Œç°çš„
```

### 2.2 ç»´åº¦ç®¡ç†ç­–ç•¥

```
é—®é¢˜ï¼šæ¯æ¬¡æ‰©å±•æ„Ÿå®˜ç»´åº¦éƒ½éœ€è¦é‡æ–°è®­ç»ƒç½‘ç»œ
è§£å†³ï¼šä»ä¸€å¼€å§‹å°±é¢„ç•™è¶³å¤Ÿçš„ç»´åº¦

æœ€ç»ˆæ„Ÿå®˜ç»´åº¦åˆ†é…ï¼š
  0-97ï¼š    åœ°å½¢è§†é‡ï¼ˆ98ç»´ï¼‰
  98-105ï¼š  è‡ªèº«åŸºæœ¬çŠ¶æ€ï¼ˆ8ç»´ï¼‰
  106-169ï¼š å›å£°é€šé“ï¼ˆ64ç»´ï¼‰â€”â€” Phase 4å®éªŒäºŒæ¿€æ´»
  170-218ï¼š ç¤¾ä¼šè§†é‡ï¼ˆ49ç»´ï¼‰â€”â€” æœ‰å…¶ä»–ä¸ªä½“æ—¶æ¿€æ´»
  219-222ï¼š ç¹æ®–çŠ¶æ€ï¼ˆ4ç»´ï¼‰â€”â€” ç¹æ®–æ¨¡å—æ¿€æ´»
  223-255ï¼š ä¿ç•™ï¼ˆ32ç»´ï¼‰â€”â€” æœªæ¥æ‰©å±•
  
  æ€»ç»´åº¦ï¼š256

  åœ¨Phase 1å¼€å§‹æ—¶å°±ä½¿ç”¨256ç»´è¾“å…¥
  æœªæ¿€æ´»çš„é€šé“å…¨ä¸ºé›¶
  ç½‘ç»œå­¦ä¼šå¿½ç•¥é›¶é€šé“
  æ¿€æ´»æ–°é€šé“æ—¶æ— éœ€é‡æ–°è®­ç»ƒ
```

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šåŠ¨ä½œç©ºé—´æ‰©å±•

### 3.1 æ–°çš„åŠ¨ä½œç©ºé—´

```
åŸå§‹åŠ¨ä½œç©ºé—´ï¼ˆ6ä¸ªï¼‰ï¼š
  0: å‘ä¸Š
  1: å‘ä¸‹
  2: å‘å·¦
  3: å‘å³
  4: åƒ
  5: ç­‰å¾…

æ–°å¢åŠ¨ä½œï¼š
  6: äº¤äº’ (interact)

æ€»åŠ¨ä½œæ•°ï¼š7

"äº¤äº’"åŠ¨ä½œçš„è¯­ä¹‰ï¼š
  å¦‚æœç›¸é‚»æ ¼æœ‰ç¬¦åˆæ¡ä»¶çš„å¼‚æ€§
  ä¸”å¯¹æ–¹ä¹Ÿåœ¨æ‰§è¡Œ"äº¤äº’"
  â†’ äº¤é…å‘ç”Ÿ
  
  å¦‚æœæ¡ä»¶ä¸æ»¡è¶³
  â†’ ç­‰åŒäº"ç­‰å¾…"ï¼ˆä»€ä¹ˆéƒ½ä¸åšï¼‰
  
  æ™ºèƒ½ä½“ä¸éœ€è¦çŸ¥é“"äº¤äº’"æ˜¯å¹²ä»€ä¹ˆçš„
  å®ƒé€šè¿‡ç»éªŒå­¦ä¹ "åœ¨æŸäº›æƒ…å†µä¸‹æ‰§è¡ŒåŠ¨ä½œ6ä¼šæœ‰å¥½çš„ç»“æœ"
  å…·ä½“æ¥è¯´ï¼š
    äº¤é… â†’ æ²¡æœ‰ç›´æ¥å¥–åŠ±ï¼ˆä¸å¥–åŠ±äº¤é…æœ¬èº«ï¼‰
    ä½†äº¤é…äº§ç”Ÿåä»£ â†’ åä»£æºå¸¦è‡ªå·±çš„åŸºå› 
    â†’ è¿›åŒ–ä¼šåå¥½"åœ¨åˆé€‚æ—¶æœºé€‰æ‹©äº¤äº’"çš„åŸºå› ç»„

æ³¨æ„ï¼š
  âœ— ä¸ç»™äº¤é…è¡Œä¸ºä»»ä½•å¥–åŠ±
  âœ— ä¸ç»™"å¯»æ‰¾é…å¶"è¡Œä¸ºä»»ä½•å¥–åŠ±
  âœ“ é€‚åº”åº¦å‡½æ•°ä¾ç„¶åªçœ‹ç”Ÿå­˜æŒ‡æ ‡
  âœ“ ä½†èƒ½æˆåŠŸç¹æ®–çš„ä¸ªä½“åŸºå› æ›´å¯èƒ½ä¼ æ’­
  âœ“ æ‰€ä»¥è¿›åŒ–é—´æ¥å¥–åŠ±äº†ç¹æ®–èƒ½åŠ›
```

### 3.2 äº¤é…å¦‚ä½•å‘ç”Ÿ

```
æ¯ä¸ªæ—¶é—´æ­¥ï¼Œä¸–ç•Œæ£€æŸ¥æ‰€æœ‰ç›¸é‚»çš„ä¸ªä½“å¯¹ï¼š

  for each pair (A, B) where Aå’ŒBç›¸é‚»:
    if A.action == 6 AND B.action == 6:     # åŒæ–¹éƒ½é€‰äº†"äº¤äº’"
      if A.sex != B.sex:                     # å¼‚æ€§
        if A.is_fertile AND B.is_fertile:    # åŒæ–¹éƒ½å¯è‚²
          â†’ äº¤é…æˆåŠŸï¼äº§ç”Ÿåä»£
          â†’ Aå’ŒBå„æŸå¤± MATING_ENERGY_COST èƒ½é‡
          â†’ Aå’ŒBè¿›å…¥å†·å´æœŸ
        else:
          â†’ æ¡ä»¶ä¸è¶³ï¼Œç­‰åŒäºç­‰å¾…
    else:
      â†’ è‡³å°‘ä¸€æ–¹æ²¡é€‰äº¤äº’ï¼Œä¸äº¤é…

å…³é”®ï¼šéœ€è¦åŒæ–¹åŒæ—¶é€‰æ‹©"äº¤äº’"
  è¿™æ„å‘³ç€ï¼š
  1. å•æ–¹é¢é€‰"äº¤äº’"ä¸ä¼šäº¤é…ï¼ˆå¦ä¸€æ–¹å¯ä»¥"æ‹’ç»"ï¼‰
  2. ä¸¤ä¸ªä¸ªä½“éœ€è¦"å­¦ä¼š"åœ¨åŒä¸€æ—¶åˆ»é€‰æ‹©äº¤äº’
  3. è¿™åˆ›é€ äº†ä¸€ä¸ªåè°ƒåšå¼ˆ
  4. æˆåŠŸåè°ƒéœ€è¦æŸç§å¯¹ä»–è€…çš„å»ºæ¨¡
  â†’ ç¤¾ä¼šè®¤çŸ¥çš„è¿›åŒ–å‹åŠ›
```

---

## ç¬¬å››éƒ¨åˆ†ï¼šä¸ªä½“ç”Ÿå‘½å‘¨æœŸï¼ˆå®Œæ•´ç‰ˆï¼‰

### 4.1 ç”Ÿå‘½é˜¶æ®µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ä¸ªä½“ç”Ÿå‘½é˜¶æ®µ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  å‡ºç”Ÿ (age = 0)                                             â”‚
â”‚  â”‚  åŸºå› ç»„æ¥è‡ªçˆ¶æ¯äº¤å‰+çªå˜                                  â”‚
â”‚  â”‚  è¡¨è§‚é—ä¼ æ ‡è®°ä»çˆ¶æ¯ç»§æ‰¿ï¼ˆå¸¦è¡°å‡ï¼‰                          â”‚
â”‚  â”‚  ç¥ç»ç½‘ç»œéšæœºåˆå§‹åŒ–ï¼ˆæ¶æ„ç”±åŸºå› ç»„å†³å®šï¼‰                     â”‚
â”‚  â”‚  èƒ½é‡ = BIRTH_ENERGY (50)                                â”‚
â”‚  â”‚  ä½ç½® = çˆ¶æ¯é™„è¿‘                                         â”‚
â”‚  â”‚  æ€§åˆ« = éšæœº                                             â”‚
â”‚  â”‚                                                         â”‚
â”‚  â”‚  ç‰¹ç‚¹ï¼š                                                  â”‚
â”‚  â”‚  - æ¯”æˆå¹´ä¸ªä½“å¼±ï¼ˆèƒ½é‡ä½ï¼‰                                â”‚
â”‚  â”‚  - ä¸èƒ½äº¤é…ï¼ˆæœªæˆå¹´ï¼‰                                    â”‚
â”‚  â”‚  - ä½†èƒ½ç§»åŠ¨ã€åƒä¸œè¥¿ã€å­¦ä¹                                 â”‚
â”‚  â–¼                                                         â”‚
â”‚  å¹¼å¹´æœŸ (age 0 â†’ MATURITY_AGE)                              â”‚
â”‚  â”‚  æ­£å¸¸ç”Ÿå­˜ï¼šè§…é£Ÿã€é¿é™©ã€å­¦ä¹                                â”‚
â”‚  â”‚  ä¸èƒ½äº¤é…                                                â”‚
â”‚  â”‚  åœ¨æ„Ÿå®˜ä¸­çœ‹åˆ°è‡ªå·±çš„"æˆå¹´"ä½ = 0                          â”‚
â”‚  â”‚                                                         â”‚
â”‚  â”‚  è¿™ä¸ªé˜¶æ®µçš„è¿›åŒ–æ„ä¹‰ï¼š                                    â”‚
â”‚  â”‚  å¹¼å¹´æœŸçš„å­˜æ´»ç‡å†³å®šäº†è¯¥åŸºå› ç»„çš„"å¯è¡Œæ€§"                  â”‚
â”‚  â”‚  å¥½çš„æ¶æ„ = å­¦ä¹ å¿« = å¹¼å¹´å­˜æ´»ç‡é«˜                        â”‚
â”‚  â–¼                                                         â”‚
â”‚  æˆå¹´æœŸ (age >= MATURITY_AGE)                               â”‚
â”‚  â”‚  å¯ä»¥äº¤é…ï¼ˆå¦‚æœå…¶ä»–æ¡ä»¶ä¹Ÿæ»¡è¶³ï¼‰                           â”‚
â”‚  â”‚  åœ¨æ„Ÿå®˜ä¸­çœ‹åˆ°è‡ªå·±çš„"æˆå¹´"ä½ = 1                          â”‚
â”‚  â”‚  ç»§ç»­æ­£å¸¸ç”Ÿå­˜                                            â”‚
â”‚  â”‚  éœ€è¦åœ¨ç”Ÿå­˜å’Œç¹æ®–ä¹‹é—´åˆ†é…èƒ½é‡                             â”‚
â”‚  â–¼                                                         â”‚
â”‚  æ­»äº¡                                                       â”‚
â”‚  â”‚  åŸå› ï¼šé¥¥é¥¿ / å±é™© / è€æ­»(å¯é€‰)                          â”‚
â”‚  â”‚  ç¥ç»ç½‘ç»œé”€æ¯                                            â”‚
â”‚  â”‚  è®°å¿†é”€æ¯                                                â”‚
â”‚  â”‚  åŸºå› ç»„è¿›å…¥"é—ä¼ å®Œæ¯•"çŠ¶æ€ï¼ˆå·²é€šè¿‡åä»£ä¼ é€’ï¼‰              â”‚
â”‚  â”‚  ä¸ªä½“ä»ä¸–ç•Œä¸­ç§»é™¤                                        â”‚
â”‚  â–¼                                                         â”‚
â”‚  (ä¸å­˜åœ¨äº†)                                                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ä¸ªä½“å®Œæ•´ç±»å®šä¹‰

```
æ–‡ä»¶ï¼ševolution/individual.pyï¼ˆç¹è¡ç‰ˆï¼‰

class Individual:
    """æ‹¥æœ‰åŸºå› ç»„ã€ä¸€æ¡å‘½ã€å’Œç¹æ®–èƒ½åŠ›çš„æ™ºèƒ½ä½“"""
    
    _next_id = 0  # å…¨å±€IDè®¡æ•°å™¨
    
    def __init__(self, genome, epigenetic=None,
                 sex=None, position=None, generation=0,
                 parent_ids=None):
        
        # === èº«ä»½ ===
        self.id = Individual._next_id
        Individual._next_id += 1
        self.generation = generation
        self.parent_ids = parent_ids or (None, None)
        
        # === é—ä¼ ä¿¡æ¯ ===
        self.genome = genome
        self.epigenetic = epigenetic or EpigeneticMarks()
        self.arch_params = self.epigenetic.apply(self.genome)
        
        # === å¤§è„‘ ===
        self.brain = self._build_brain()
        
        # === èº«ä½“çŠ¶æ€ ===
        self.sex = sex if sex is not None else np.random.randint(0, 2)
        self.is_alive = True
        self.energy = Config.BIRTH_ENERGY
        self.position = position
        self.age = 0
        
        # === ç¹æ®–çŠ¶æ€ ===
        self.mating_cooldown = 0
        self.is_fertile = False  # æ¯æ­¥é‡æ–°è®¡ç®—
        self.offspring_count = 0
        
        # === ç”Ÿå‘½ç»Ÿè®¡ ===
        self.stats = {
            'lifespan': 0,
            'food_eaten': 0,
            'total_energy_gained': 0.0,
            'total_energy_lost': 0.0,
            'death_cause': None,
            'avg_energy': 0.0,
            'energy_sum': 0.0,
            'unique_positions': set(),
            'prediction_losses': [],
            'offspring_produced': 0,
            'mating_attempts': 0,     # é€‰äº†"äº¤äº’"åŠ¨ä½œçš„æ¬¡æ•°
            'mating_successes': 0,    # æˆåŠŸäº¤é…çš„æ¬¡æ•°
        }
    
    def _build_brain(self):
        """æ ¹æ®åŸºå› ç»„æ„å»ºç¥ç»ç½‘ç»œ"""
        agent_config = self._genome_to_config()
        agent_config['sensory_dim'] = 256    # æ‰©å±•åçš„æ„Ÿå®˜ç»´åº¦
        agent_config['num_actions'] = 7       # æ‰©å±•åçš„åŠ¨ä½œæ•°
        agent = GenesisAgent(agent_config)
        self._apply_weight_init(agent)
        return agent
    
    def compute_fertility(self):
        """è®¡ç®—æ˜¯å¦å¯è‚²ï¼ˆæ¯æ­¥æ›´æ–°ï¼‰"""
        self.is_fertile = (
            self.age >= Config.MATURITY_AGE
            and self.energy >= Config.MATING_ENERGY_THRESHOLD
            and self.mating_cooldown == 0
            and self.is_alive
        )
        return self.is_fertile
    
    def get_sensory_self_state(self):
        """
        è¿”å›è‡ªèº«ç¹æ®–çŠ¶æ€çš„æ„Ÿå®˜ç¼–ç ï¼ˆ4ç»´ï¼‰
        
        è¿™äº›ä¿¡æ¯æ˜¯æ™ºèƒ½ä½“"èƒ½æ„Ÿå—åˆ°"çš„è‡ªèº«çŠ¶æ€
        ç±»ä¼¼äºäººèƒ½æ„Ÿå—åˆ°è‡ªå·±æ˜¯å¦é¥¥é¥¿
        ä½†ä¸æ˜¯"è‡ªçœ"â€”â€”åªæ˜¯ç”Ÿç†ä¿¡å·
        """
        return np.array([
            float(self.sex),                                    # æ€§åˆ«
            float(self.age >= Config.MATURITY_AGE),             # æ˜¯å¦æˆå¹´
            self.mating_cooldown / Config.MATING_COOLDOWN       # å†·å´çŠ¶æ€
                if Config.MATING_COOLDOWN > 0 else 0.0,
            float(self.energy >= Config.MATING_ENERGY_THRESHOLD) # èƒ½é‡è¶³å¦
        ])
    
    def live_one_step(self, world):
        """
        æ´»ä¸€æ­¥
        
        è¿”å› (action, info_dict)
        """
        if not self.is_alive:
            return None, None
        
        self.age += 1
        if self.mating_cooldown > 0:
            self.mating_cooldown -= 1
        self.compute_fertility()
        
        # è·å–è§‚å¯Ÿï¼ˆç”±worldæä¾›ï¼ŒåŒ…å«ç¤¾ä¼šä¿¡æ¯ï¼‰
        observation = world.get_observation(self)
        
        # å†³ç­–
        action, info = self.brain.act(observation)
        
        # è®°å½•äº¤äº’åŠ¨ä½œçš„ä½¿ç”¨
        if action == 6:
            self.stats['mating_attempts'] += 1
        
        return action, info
    
    def apply_action_result(self, new_position, energy_change,
                            is_dead, mated, reward):
        """åº”ç”¨åŠ¨ä½œçš„ç»“æœ"""
        self.position = new_position
        self.energy += energy_change
        self.energy = max(0, min(Config.MAX_ENERGY, self.energy))
        
        # æ›´æ–°ç»Ÿè®¡
        self.stats['lifespan'] += 1
        self.stats['energy_sum'] += self.energy
        self.stats['unique_positions'].add(tuple(self.position))
        
        if energy_change > 0:
            self.stats['food_eaten'] += 1
            self.stats['total_energy_gained'] += energy_change
        elif energy_change < 0:
            self.stats['total_energy_lost'] += abs(energy_change)
        
        if mated:
            self.stats['mating_successes'] += 1
            self.mating_cooldown = Config.MATING_COOLDOWN
        
        # å­¦ä¹ 
        next_obs = None  # worldä¼šåœ¨ä¸‹ä¸€æ­¥æä¾›
        # å­¦ä¹ åœ¨worldçš„ä¸»å¾ªç¯ä¸­å¤„ç†
        
        # æ£€æŸ¥æ­»äº¡
        if is_dead or self.energy <= 0:
            self.die('danger' if is_dead else 'starvation')
    
    def record_offspring(self):
        """è®°å½•äº§ç”Ÿäº†ä¸€ä¸ªåä»£"""
        self.offspring_count += 1
        self.stats['offspring_produced'] += 1
    
    def die(self, cause):
        """æ°¸ä¹…æ­»äº¡"""
        self.is_alive = False
        self.stats['death_cause'] = cause
        self.stats['avg_energy'] = (
            self.stats['energy_sum'] / max(1, self.stats['lifespan'])
        )
        self.stats['unique_positions_visited'] = len(
            self.stats['unique_positions']
        )
        self.stats['prediction_loss_final'] = (
            np.mean(self.stats['prediction_losses'][-100:])
            if self.stats['prediction_losses'] else 1.0
        )
        
        # æ›´æ–°è¡¨è§‚é—ä¼ 
        self.epigenetic.update_from_life(self.stats)
        
        # é”€æ¯å¤§è„‘
        del self.brain
        self.brain = None
    
    def get_fitness(self):
        """
        é€‚åº”åº¦ = ç”Ÿå­˜æŒ‡æ ‡ + ç¹æ®–æˆåŠŸ
        
        æ³¨æ„ï¼šç¹æ®–æˆåŠŸæ˜¯è‡ªç„¶é€‰æ‹©çš„æ ¸å¿ƒ
        èƒ½æˆåŠŸç¹æ®–çš„ä¸ªä½“åŸºå› æ›´å¤šåœ°å‡ºç°åœ¨ä¸‹ä¸€ä»£ä¸­
        ä½†æˆ‘ä»¬ä¸ç›´æ¥åœ¨é€‚åº”åº¦ä¸­å¥–åŠ±äº¤é…
        è€Œæ˜¯é€šè¿‡åŸºå› é¢‘ç‡è‡ªç„¶ä½“ç°
        
        é€‚åº”åº¦åªç”¨äºåˆ†æï¼Œä¸ç”¨äºé€‰æ‹©
        ï¼ˆå› ä¸ºæ˜¯è¿ç»­æ¨¡æ‹Ÿï¼Œé€‰æ‹©é€šè¿‡ç”Ÿå­˜å’Œç¹æ®–è‡ªç„¶å‘ç”Ÿï¼‰
        """
        return compute_fitness(self.stats)
```

---

## ç¬¬äº”éƒ¨åˆ†ï¼šä¸–ç•Œç³»ç»Ÿï¼ˆç¹è¡ç‰ˆï¼‰

### 5.1 è¿›åŒ–ä¸–ç•Œç±»

```
æ–‡ä»¶ï¼šworld/evolution_world.py

class EvolutionWorld:
    """
    æ”¯æŒå¤šä¸ªä½“å’Œç¹è¡çš„ä¸–ç•Œ
    
    ç»§æ‰¿ GenesisWorld çš„åœ°å½¢ç³»ç»Ÿ
    æ–°å¢ï¼šå¤šä¸ªä½“ç®¡ç†ã€ç¤¾ä¼šæ„ŸçŸ¥ã€äº¤é…å¤„ç†
    """
    
    def __init__(self, config):
        # === åœ°å½¢ï¼ˆå¤ç”¨GenesisWorldçš„é€»è¾‘ï¼‰===
        self.grid_size = config.WORLD_SIZE
        self.terrain = self._generate_terrain(config)
        
        # === å®ä½“ ===
        self.food_positions = set()
        self.danger_positions = set()
        self.wall_positions = set()
        self._place_entities(config)
        
        # === ä¸ªä½“ ===
        self.individuals = {}  # id â†’ Individual
        self.position_to_individual = {}  # (x,y) â†’ Individual
        
        # === ç»Ÿè®¡ ===
        self.total_births = 0
        self.total_deaths = 0
        self.total_matings = 0
        self.step_count = 0
        
        # === å®éªŒæ¨¡å—ï¼ˆä¸Phase 4å®éªŒå…¼å®¹ï¼‰===
        self.echo_zone = None       # å®éªŒäºŒ
        self.hidden_interface = None # å®éªŒä¸‰
        self.echo_active = False
        self.interface_revealed = False
    
    def add_individual(self, individual):
        """æ·»åŠ ä¸ªä½“åˆ°ä¸–ç•Œ"""
        if individual.position is None:
            individual.position = self._random_empty_position()
        self.individuals[individual.id] = individual
        self.position_to_individual[tuple(individual.position)] = individual
    
    def remove_individual(self, individual_id):
        """ä»ä¸–ç•Œä¸­ç§»é™¤ä¸ªä½“"""
        if individual_id in self.individuals:
            ind = self.individuals[individual_id]
            pos = tuple(ind.position)
            if pos in self.position_to_individual:
                if self.position_to_individual[pos].id == individual_id:
                    del self.position_to_individual[pos]
            del self.individuals[individual_id]
    
    def get_observation(self, individual):
        """
        ä¸ºæŒ‡å®šä¸ªä½“ç”Ÿæˆå®Œæ•´è§‚å¯Ÿå‘é‡ï¼ˆ256ç»´ï¼‰
        
        é€šé“åˆ†é…ï¼š
          0-97ï¼š   åœ°å½¢è§†é‡
          98-105ï¼š  è‡ªèº«åŸºæœ¬çŠ¶æ€
          106-169ï¼š å›å£°é€šé“ï¼ˆå®éªŒäºŒï¼‰
          170-218ï¼š ç¤¾ä¼šè§†é‡
          219-222ï¼š ç¹æ®–çŠ¶æ€
          223-255ï¼š ä¿ç•™ï¼ˆé›¶å¡«å……ï¼‰
        """
        obs = np.zeros(256)
        
        # åœ°å½¢è§†é‡ï¼ˆ0-97ï¼‰
        obs[0:98] = self._get_terrain_view(individual.position)
        
        # è‡ªèº«çŠ¶æ€ï¼ˆ98-105ï¼‰
        obs[98] = individual.energy / Config.MAX_ENERGY
        obs[99:106] = self._action_onehot(individual)  # 7ç»´now
        obs[105] = 0  # ä¸Šä¸€æ­¥èƒ½é‡å˜åŒ–ï¼ˆéœ€è¦è·Ÿè¸ªï¼‰
        
        # å›å£°é€šé“ï¼ˆ106-169ï¼‰
        if self.echo_active:
            obs[106:170] = self._get_echo_signal(individual)
        
        # ç¤¾ä¼šè§†é‡ï¼ˆ170-218ï¼‰
        obs[170:219] = self._get_social_view(individual)
        
        # ç¹æ®–çŠ¶æ€ï¼ˆ219-222ï¼‰
        obs[219:223] = individual.get_sensory_self_state()
        
        # 223-255 ä¿ç•™ä¸ºé›¶
        
        return obs
    
    def _get_social_view(self, observer):
        """
        è¿”å›7Ã—7è§†é‡ä¸­å…¶ä»–ä¸ªä½“çš„ç¼–ç ï¼ˆ49ç»´ï¼‰
        
        æ¯æ ¼ä¸€ä¸ªå€¼ï¼š
          0.0 = æ— ä¸ªä½“
          0.2 = é›„æ€§å¹¼å¹´
          0.4 = é›Œæ€§å¹¼å¹´
          0.6 = é›„æ€§æˆå¹´ï¼ˆå¯èƒ½å¯äº¤é…ï¼‰
          0.8 = é›Œæ€§æˆå¹´ï¼ˆå¯èƒ½å¯äº¤é…ï¼‰
          1.0 = è‡ªå·±ï¼ˆä¸­å¿ƒæ ¼æ°¸è¿œæ˜¯è‡ªå·±ï¼‰
        """
        social = np.zeros(49)
        view_range = 3  # 7Ã—7
        
        ox, oy = observer.position
        idx = 0
        for dy in range(-view_range, view_range + 1):
            for dx in range(-view_range, view_range + 1):
                if dx == 0 and dy == 0:
                    social[idx] = 1.0  # è‡ªå·±
                else:
                    wx = (ox + dx) % self.grid_size
                    wy = (oy + dy) % self.grid_size
                    pos = (wx, wy)
                    
                    if pos in self.position_to_individual:
                        other = self.position_to_individual[pos]
                        if other.id != observer.id and other.is_alive:
                            is_mature = other.age >= Config.MATURITY_AGE
                            if other.sex == 0:  # é›„
                                social[idx] = 0.6 if is_mature else 0.2
                            else:  # é›Œ
                                social[idx] = 0.8 if is_mature else 0.4
                
                idx += 1
        
        return social
    
    def step(self):
        """
        ä¸–ç•Œä¸»å¾ªç¯çš„ä¸€æ­¥
        
        é¡ºåºï¼š
        1. æ‰€æœ‰ä¸ªä½“åšå†³ç­–
        2. æ‰§è¡Œéäº¤é…åŠ¨ä½œ
        3. å¤„ç†äº¤é…
        4. å¤„ç†æ­»äº¡
        5. æ·»åŠ æ–°ç”Ÿä¸ªä½“
        6. æ›´æ–°ä¸–ç•ŒçŠ¶æ€
        """
        self.step_count += 1
        
        # === é˜¶æ®µ1ï¼šæ‰€æœ‰ä¸ªä½“åšå†³ç­– ===
        decisions = {}  # id â†’ (action, info)
        for ind_id, ind in list(self.individuals.items()):
            if ind.is_alive:
                action, info = ind.live_one_step(self)
                if action is not None:
                    decisions[ind_id] = (action, info)
        
        # === é˜¶æ®µ2ï¼šæ‰§è¡Œéäº¤é…åŠ¨ä½œ ===
        for ind_id, (action, info) in decisions.items():
            ind = self.individuals.get(ind_id)
            if ind is None or not ind.is_alive:
                continue
            
            if action == 6:
                # äº¤äº’åŠ¨ä½œï¼šæš‚ä¸æ‰§è¡Œï¼Œåœ¨é˜¶æ®µ3å¤„ç†
                # ä½†æ‰£é™¤åŸºæœ¬èƒ½é‡æ¶ˆè€—
                ind.energy -= Config.STEP_COST
                continue
            
            # å¤„ç†ç§»åŠ¨/åƒ/ç­‰å¾…
            new_pos, energy_change, is_dead = self._execute_action(
                ind, action
            )
            
            # æ›´æ–°ä½ç½®ç´¢å¼•
            old_pos = tuple(ind.position)
            if old_pos in self.position_to_individual:
                if self.position_to_individual[old_pos].id == ind_id:
                    del self.position_to_individual[old_pos]
            
            reward = self._compute_reward(energy_change, is_dead, ind)
            ind.apply_action_result(new_pos, energy_change,
                                     is_dead, False, reward)
            
            if ind.is_alive:
                self.position_to_individual[tuple(ind.position)] = ind
        
        # === é˜¶æ®µ3ï¼šå¤„ç†äº¤é… ===
        new_offspring = self._process_mating(decisions)
        
        # === é˜¶æ®µ4ï¼šæ¸…ç†æ­»äº¡ä¸ªä½“ ===
        dead_ids = [
            ind_id for ind_id, ind in self.individuals.items()
            if not ind.is_alive
        ]
        for ind_id in dead_ids:
            self.remove_individual(ind_id)
            self.total_deaths += 1
        
        # === é˜¶æ®µ5ï¼šæ·»åŠ æ–°ç”Ÿä¸ªä½“ ===
        for child in new_offspring:
            if len(self.individuals) < Config.MAX_POPULATION:
                self.add_individual(child)
                self.total_births += 1
        
        # === é˜¶æ®µ6ï¼šæ›´æ–°ä¸–ç•Œ ===
        self._update_terrain()
        
        # === é˜¶æ®µ7ï¼šæ‰€æœ‰å­˜æ´»ä¸ªä½“å­¦ä¹  ===
        for ind_id, ind in self.individuals.items():
            if ind.is_alive and ind.brain is not None:
                next_obs = self.get_observation(ind)
                # è°ƒç”¨å­¦ä¹ 
                action = decisions.get(ind_id, (5, None))[0]
                reward = 0  # å·²åœ¨é˜¶æ®µ2ä¸­å¤„ç†
                ind.brain.observe_result(
                    None, next_obs, action, reward, False
                )
    
    def _execute_action(self, individual, action):
        """
        æ‰§è¡Œéäº¤é…åŠ¨ä½œ
        è¿”å› (new_position, energy_change, is_dead)
        """
        x, y = individual.position
        energy_change = -Config.STEP_COST
        is_dead = False
        
        # ç§»åŠ¨
        if action == 0:  # ä¸Š
            new_y = (y - 1) % self.grid_size
            if (x, new_y) not in self.wall_positions:
                y = new_y
        elif action == 1:  # ä¸‹
            new_y = (y + 1) % self.grid_size
            if (x, new_y) not in self.wall_positions:
                y = new_y
        elif action == 2:  # å·¦
            new_x = (x - 1) % self.grid_size
            if (new_x, y) not in self.wall_positions:
                x = new_x
        elif action == 3:  # å³
            new_x = (x + 1) % self.grid_size
            if (new_x, y) not in self.wall_positions:
                x = new_x
        elif action == 4:  # åƒ
            if (x, y) in self.food_positions:
                energy_change += Config.FOOD_ENERGY
                self.food_positions.remove((x, y))
                self._spawn_food()
        # action == 5: ç­‰å¾…ï¼Œä»€ä¹ˆéƒ½ä¸åš
        
        # æ£€æŸ¥å±é™©
        if (x, y) in self.danger_positions:
            energy_change -= Config.DANGER_PENALTY
            if individual.energy + energy_change <= 0:
                is_dead = True
        
        # æ£€æŸ¥ç¢°æ’ï¼ˆä¸èƒ½ç§»åŠ¨åˆ°å…¶ä»–ä¸ªä½“å æ®çš„æ ¼å­ï¼‰
        new_pos = (x, y)
        if new_pos in self.position_to_individual:
            other = self.position_to_individual[new_pos]
            if other.id != individual.id and other.is_alive:
                new_pos = tuple(individual.position)  # ä¸åŠ¨
        
        return new_pos, energy_change, is_dead
    
    def _process_mating(self, decisions):
        """
        å¤„ç†æ‰€æœ‰äº¤é…
        
        é€»è¾‘ï¼š
        1. æ‰¾å‡ºæ‰€æœ‰é€‰äº†"äº¤äº’"(action=6)çš„ä¸ªä½“
        2. å¯¹æ¯å¯¹ç›¸é‚»çš„ã€å¼‚æ€§çš„ã€åŒæ–¹éƒ½é€‰äº†äº¤äº’çš„ä¸ªä½“
        3. æ£€æŸ¥åŒæ–¹æ˜¯å¦éƒ½å¯è‚²
        4. å¦‚æœæ˜¯ â†’ äº¤é…æˆåŠŸï¼Œäº§ç”Ÿåä»£
        
        è¿”å›æ–°ç”Ÿä¸ªä½“åˆ—è¡¨
        """
        # æ”¶é›†æ‰€æœ‰é€‰äº†äº¤äº’çš„å¯è‚²ä¸ªä½“
        interacting = {}
        for ind_id, (action, info) in decisions.items():
            if action == 6:
                ind = self.individuals.get(ind_id)
                if ind and ind.is_alive and ind.is_fertile:
                    interacting[ind_id] = ind
        
        # å¯»æ‰¾é…å¯¹
        mated_ids = set()  # å·²é…å¯¹çš„ä¸ªä½“
        offspring = []
        
        for id_a, ind_a in interacting.items():
            if id_a in mated_ids:
                continue
            
            for id_b, ind_b in interacting.items():
                if id_b in mated_ids or id_b == id_a:
                    continue
                
                # æ£€æŸ¥æ¡ä»¶
                if ind_a.sex == ind_b.sex:
                    continue
                if not self._are_adjacent(ind_a, ind_b):
                    continue
                
                # äº¤é…æˆåŠŸï¼
                children = self._create_offspring(ind_a, ind_b)
                offspring.extend(children)
                
                # æ‰£é™¤èƒ½é‡
                ind_a.energy -= Config.MATING_ENERGY_COST
                ind_b.energy -= Config.MATING_ENERGY_COST
                
                # æ ‡è®°
                ind_a.record_offspring()
                ind_b.record_offspring()
                ind_a.mating_cooldown = Config.MATING_COOLDOWN
                ind_b.mating_cooldown = Config.MATING_COOLDOWN
                mated_ids.add(id_a)
                mated_ids.add(id_b)
                
                self.total_matings += 1
                break
        
        return offspring
    
    def _are_adjacent(self, a, b):
        """æ£€æŸ¥ä¸¤ä¸ªä¸ªä½“æ˜¯å¦ç›¸é‚»ï¼ˆå››é‚»åŸŸ+ç¯å½¢è¾¹ç•Œï¼‰"""
        ax, ay = a.position
        bx, by = b.position
        dx = min(abs(ax - bx), self.grid_size - abs(ax - bx))
        dy = min(abs(ay - by), self.grid_size - abs(ay - by))
        return (dx + dy) == 1
    
    def _create_offspring(self, parent_a, parent_b):
        """äº§ç”Ÿåä»£"""
        children = []
        
        # åŸºå› ç»„äº¤å‰
        child_g1, child_g2 = GeneticOperators.crossover(
            parent_a.genome, parent_b.genome
        )
        
        # çªå˜
        child_g1 = GeneticOperators.mutate_adaptive(
            child_g1, parent_a.generation
        )
        
        # è¡¨è§‚é—ä¼ 
        child_epi = parent_a.epigenetic.inherit(parent_b.epigenetic)
        
        # å‡ºç”Ÿä½ç½®
        birth_pos = self._find_birth_position(parent_a.position)
        
        if birth_pos is not None:
            child = Individual(
                genome=child_g1,
                epigenetic=child_epi,
                sex=np.random.randint(0, 2),
                position=birth_pos,
                generation=max(parent_a.generation,
                             parent_b.generation) + 1,
                parent_ids=(parent_a.id, parent_b.id)
            )
            children.append(child)
        
        # ç¬¬äºŒä¸ªåä»£ï¼ˆ30%æ¦‚ç‡ï¼‰
        if np.random.random() < 0.3:
            child_g2 = GeneticOperators.mutate_adaptive(
                child_g2, parent_b.generation
            )
            child_epi2 = parent_b.epigenetic.inherit(parent_a.epigenetic)
            birth_pos2 = self._find_birth_position(parent_a.position)
            
            if birth_pos2 is not None:
                child2 = Individual(
                    genome=child_g2,
                    epigenetic=child_epi2,
                    sex=np.random.randint(0, 2),
                    position=birth_pos2,
                    generation=max(parent_a.generation,
                                 parent_b.generation) + 1,
                    parent_ids=(parent_a.id, parent_b.id)
                )
                children.append(child2)
        
        return children
    
    def _find_birth_position(self, parent_pos):
        """åœ¨çˆ¶æ¯é™„è¿‘æ‰¾ç©ºä½"""
        px, py = parent_pos
        
        # å…ˆæ£€æŸ¥ç´§é‚»çš„æ ¼å­
        for dx, dy in [(0,1),(0,-1),(1,0),(-1,0),
                        (1,1),(1,-1),(-1,1),(-1,-1)]:
            x = (px + dx) % self.grid_size
            y = (py + dy) % self.grid_size
            pos = (x, y)
            if self._is_empty_for_birth(pos):
                return pos
        
        # æ‰©å¤§æœç´¢èŒƒå›´
        for r in range(2, 6):
            for dx in range(-r, r+1):
                for dy in range(-r, r+1):
                    if abs(dx) + abs(dy) > r:
                        continue
                    x = (px + dx) % self.grid_size
                    y = (py + dy) % self.grid_size
                    pos = (x, y)
                    if self._is_empty_for_birth(pos):
                        return pos
        
        return None  # é™„è¿‘æ²¡æœ‰ç©ºä½ï¼Œä¸äº§ç”Ÿåä»£
    
    def _is_empty_for_birth(self, pos):
        """æ£€æŸ¥ä½ç½®æ˜¯å¦é€‚åˆå‡ºç”Ÿ"""
        if pos in self.wall_positions:
            return False
        if pos in self.danger_positions:
            return False
        if pos in self.position_to_individual:
            return False
        return True
    
    def _compute_reward(self, energy_change, is_dead, individual):
        """
        è®¡ç®—å¥–åŠ±ä¿¡å·
        ä½¿ç”¨åŸºå› ç»„ä¸­çš„å¥–åŠ±å‚æ•°
        """
        p = individual.arch_params
        if is_dead or individual.energy + energy_change <= 0:
            return p['reward_death']
        elif energy_change > 0:
            return p['reward_food']
        else:
            return p['reward_step']
    
    def get_alive_individuals(self):
        """è¿”å›æ‰€æœ‰å­˜æ´»ä¸ªä½“"""
        return [ind for ind in self.individuals.values() if ind.is_alive]
    
    def get_population_stats(self):
        """è¿”å›ç§ç¾¤ç»Ÿè®¡"""
        alive = self.get_alive_individuals()
        if not alive:
            return {'population': 0}
        
        return {
            'population': len(alive),
            'avg_energy': np.mean([i.energy for i in alive]),
            'avg_age': np.mean([i.age for i in alive]),
            'num_mature': sum(1 for i in alive
                            if i.age >= Config.MATURITY_AGE),
            'num_fertile': sum(1 for i in alive if i.is_fertile),
            'sex_ratio': sum(1 for i in alive if i.sex == 0) / len(alive),
            'total_births': self.total_births,
            'total_deaths': self.total_deaths,
            'total_matings': self.total_matings,
            'generation_max': max(i.generation for i in alive),
        }
```

---

## ç¬¬å…­éƒ¨åˆ†ï¼šç§ç¾¤ç¨³å®šæ€§æœºåˆ¶

### 6.1 é˜²ç­ç»

```
é—®é¢˜ï¼šå¦‚æœæ‰€æœ‰ä¸ªä½“éƒ½æ­»äº†ï¼Œå®éªŒå°±ç»“æŸäº†
è§£å†³æ–¹æ¡ˆï¼šå½“ç§ç¾¤ä½äºä¸´ç•Œå€¼æ—¶ï¼Œæ³¨å…¥æ–°ä¸ªä½“

class PopulationGuard:
    """ç§ç¾¤å®ˆæŠ¤è€…ï¼šé˜²æ­¢ç­ç»"""
    
    def __init__(self, config):
        self.min_population = config.MIN_POPULATION  # å¦‚ 10
        self.injection_count = config.INJECTION_COUNT  # å¦‚ 5
        self.injection_events = []
    
    def check_and_inject(self, world):
        """
        å¦‚æœç§ç¾¤å¤ªå°ï¼Œæ³¨å…¥æ–°ä¸ªä½“
        
        æ³¨å…¥çš„ä¸ªä½“ä½¿ç”¨éšæœºåŸºå› ç»„
        è¿™æ¨¡æ‹Ÿäº†"æ¥è‡ªå…¶ä»–åœ°æ–¹çš„ç§»æ°‘"
        ä¸æ˜¯å¤æ´»æ­»äº¡ä¸ªä½“
        """
        alive = world.get_alive_individuals()
        
        if len(alive) < self.min_population:
            num_inject = self.injection_count
            
            for _ in range(num_inject):
                if len(world.individuals) < Config.MAX_POPULATION:
                    new_ind = Individual(
                        genome=Genome(),  # éšæœºåŸºå› ç»„
                        position=world._random_empty_position()
                    )
                    world.add_individual(new_ind)
            
            self.injection_events.append({
                'step': world.step_count,
                'population_before': len(alive),
                'injected': num_inject
            })
            
            return True
        return False
```

### 6.2 é˜²è¿‡åº¦ç¹æ®–

```
å·²æœ‰çš„æœºåˆ¶ï¼š
  MAX_POPULATION = 100
  è¶…è¿‡ä¸Šé™æ—¶ä¸äº§ç”Ÿåä»£
  
é¢å¤–æœºåˆ¶ï¼ˆå¯é€‰ï¼‰ï¼š
  å½“ç§ç¾¤æ¥è¿‘ä¸Šé™æ—¶ï¼Œé£Ÿç‰©å˜å°‘
  â†’ è‡ªç„¶é™åˆ¶ç§ç¾¤å¢é•¿
  â†’ æ›´åƒçœŸå®ç”Ÿæ€

class ResourceScaling:
    """èµ„æºéšç§ç¾¤å¯†åº¦å˜åŒ–"""
    
    def compute_food_count(self, current_population):
        """
        ç§ç¾¤å¤šæ—¶é£Ÿç‰©å°‘ï¼ˆç«äº‰åŠ å‰§ï¼‰
        ç§ç¾¤å°‘æ—¶é£Ÿç‰©å¤šï¼ˆèµ„æºå……è£•ï¼‰
        """
        base_food = Config.NUM_FOOD  # 15
        density = current_population / Config.MAX_POPULATION
        
        # é£Ÿç‰©æ•°é‡ä¸ç§ç¾¤æˆåæ¯”
        # ç§ç¾¤å°‘(density=0.1)æ—¶ï¼šé£Ÿç‰©Ã—1.5
        # ç§ç¾¤æ»¡(density=1.0)æ—¶ï¼šé£Ÿç‰©Ã—0.5
        scale = 1.5 - density * 1.0
        scale = max(0.5, min(1.5, scale))
        
        return int(base_food * scale)
```

---

## ç¬¬ä¸ƒéƒ¨åˆ†ï¼šé…ç½®å‚æ•°

```
# config.py æ–°å¢å‚æ•°

# === æ„Ÿå®˜å‚æ•°æ›´æ–° ===
SENSORY_DIM = 256               # æ€»æ„Ÿå®˜ç»´åº¦ï¼ˆæ‰©å±•åï¼‰
NUM_ACTIONS = 7                 # æ€»åŠ¨ä½œæ•°ï¼ˆå«äº¤äº’åŠ¨ä½œï¼‰

# === ç¹è¡å‚æ•° ===
BIRTH_ENERGY = 50               # å‡ºç”Ÿæ—¶çš„èƒ½é‡
MATURITY_AGE = 200              # æˆå¹´å¹´é¾„ï¼ˆæ­¥ï¼‰
MATING_ENERGY_THRESHOLD = 40    # äº¤é…æ‰€éœ€æœ€ä½èƒ½é‡
MATING_ENERGY_COST = 15         # æ¯æ¬¡äº¤é…æ¶ˆè€—çš„èƒ½é‡
MATING_COOLDOWN = 100           # äº¤é…åå†·å´æœŸï¼ˆæ­¥ï¼‰
MAX_OFFSPRING_PER_MATING = 2    # æ¯æ¬¡äº¤é…æœ€å¤§åä»£æ•°
SECOND_OFFSPRING_PROB = 0.3     # äº§ç”Ÿç¬¬äºŒä¸ªåä»£çš„æ¦‚ç‡

# === ç§ç¾¤å‚æ•° ===
INITIAL_POPULATION = 50         # åˆå§‹ç§ç¾¤å¤§å°
MAX_POPULATION = 100            # æœ€å¤§ç§ç¾¤ä¸Šé™
MIN_POPULATION = 10             # æœ€å°ç§ç¾¤ï¼ˆä½äºæ­¤å€¼æ³¨å…¥æ–°ä¸ªä½“ï¼‰
INJECTION_COUNT = 5             # æ¯æ¬¡æ³¨å…¥çš„æ–°ä¸ªä½“æ•°

# === è¿ç»­ä»¿çœŸå‚æ•° ===
SIMULATION_TOTAL_STEPS = 500000 # æ€»æ¨¡æ‹Ÿæ­¥æ•°
STATS_INTERVAL = 100            # ç»Ÿè®¡é—´éš”
CHECKPOINT_INTERVAL = 10000     # æ£€æŸ¥ç‚¹é—´éš”
ANALYSIS_INTERVAL = 5000        # åˆ†æé—´éš”
```

---

## ç¬¬å…«éƒ¨åˆ†ï¼šç›‘æµ‹æ‰©å±•

### 8.1 æ–°å¢ç›‘æµ‹æŒ‡æ ‡

```
æ–‡ä»¶ï¼šmonitoring/evolution_monitor.py

class EvolutionMonitor:
    """è¿›åŒ–å’Œç§ç¾¤åŠ¨æ€ç›‘æµ‹"""
    
    def __init__(self, config):
        self.history = {
            'step': [],
            'population_size': [],
            'avg_energy': [],
            'avg_age': [],
            'birth_rate': [],           # æ¯1000æ­¥çš„å‡ºç”Ÿæ•°
            'death_rate': [],           # æ¯1000æ­¥çš„æ­»äº¡æ•°
            'mating_rate': [],          # æ¯1000æ­¥çš„äº¤é…æ•°
            'sex_ratio': [],            # é›„æ€§æ¯”ä¾‹
            'generation_max': [],       # æœ€å¤§ä»£æ•°
            'avg_lifespan_at_death': [],# æ­»äº¡æ—¶çš„å¹³å‡å¯¿å‘½
            'genome_diversity': [],     # åŸºå› ç»„å¤šæ ·æ€§
            'interact_action_rate': [], # äº¤äº’åŠ¨ä½œä½¿ç”¨ç‡
            
            # åŸºå› ç»„å‚æ•°è¿½è¸ª
            'avg_core_hidden_dim': [],
            'avg_learning_rate': [],
            'avg_buffer_size': [],
        }
        
        self._recent_births = 0
        self._recent_deaths = 0
        self._recent_matings = 0
        self._last_record_step = 0
    
    def record(self, step, world):
        """è®°å½•ä¸€ä¸ªæ—¶é—´ç‚¹çš„æ•°æ®"""
        
        alive = world.get_alive_individuals()
        if not alive:
            return
        
        stats = world.get_population_stats()
        
        self.history['step'].append(step)
        self.history['population_size'].append(stats['population'])
        self.history['avg_energy'].append(stats['avg_energy'])
        self.history['avg_age'].append(stats['avg_age'])
        self.history['sex_ratio'].append(stats['sex_ratio'])
        self.history['generation_max'].append(stats['generation_max'])
        
        # å‡ºç”Ÿ/æ­»äº¡/äº¤é…ç‡
        interval = step - self._last_record_step
        if interval > 0:
            self.history['birth_rate'].append(
                self._recent_births / interval * 1000
            )
            self.history['death_rate'].append(
                self._recent_deaths / interval * 1000
            )
            self.history['mating_rate'].append(
                self._recent_matings / interval * 1000
            )
        
        # åŸºå› ç»„ç»Ÿè®¡
        genomes = [ind.genome.genes for ind in alive]
        avg_genome = np.mean(genomes, axis=0)
        self.history['avg_core_hidden_dim'].append(avg_genome[3])
        self.history['avg_learning_rate'].append(avg_genome[10])
        self.history['avg_buffer_size'].append(avg_genome[15])
        
        # å¤šæ ·æ€§
        if len(genomes) > 1:
            diversity = np.mean([
                np.linalg.norm(genomes[i] - genomes[j])
                for i in range(len(genomes))
                for j in range(i+1, len(genomes))
            ])
        else:
            diversity = 0
        self.history['genome_diversity'].append(diversity)
        
        # é‡ç½®è®¡æ•°å™¨
        self._recent_births = 0
        self._recent_deaths = 0
        self._recent_matings = 0
        self._last_record_step = step
```

### 8.2 ä»ªè¡¨æ¿æ‰©å±•

```
æ‰©å±• Dashboard å¢åŠ ä»¥ä¸‹é¢æ¿ï¼š

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Genesis Evolution Dashboard          Step: 123,456 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ ğŸ—ºï¸ ä¸–ç•Œè§†å›¾          â”‚ ğŸ“Š ç§ç¾¤åŠ¨æ€                  â”‚
  â”‚  (æ˜¾ç¤ºæ‰€æœ‰ä¸ªä½“       â”‚  Population: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 72     â”‚
  â”‚   â™‚ç”¨è“è‰² â™€ç”¨ç²‰è‰²   â”‚  Births/1k:  â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 3.2   â”‚
  â”‚   å¹¼å¹´ç”¨å°ç‚¹         â”‚  Deaths/1k:  â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ 4.1   â”‚
  â”‚   æˆå¹´ç”¨å¤§ç‚¹)        â”‚  Matings/1k: â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.5   â”‚
  â”‚                      â”‚                              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ ğŸ“ˆ ç§ç¾¤å¤§å°å†å²      â”‚ ğŸ§¬ åŸºå› ç»„è¶‹åŠ¿                â”‚
  â”‚  (ç§ç¾¤å¤§å°vsæ—¶é—´)    â”‚  core_dim: â†’ 96              â”‚
  â”‚                      â”‚  LR: â†’ 0.00082              â”‚
  â”‚                      â”‚  buffer: â†’ 3200              â”‚
  â”‚                      â”‚  diversity: 12.3             â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ ğŸ§  æ„è¯†æŒ‡æ ‡ï¼ˆé€‰å®šä¸ªä½“ï¼‰                              â”‚
  â”‚  SVCæ£€æµ‹: ç›‘æµ‹ä¸­                                    â”‚
  â”‚  å†…éƒ¨çŠ¶æ€å¤æ‚åº¦: 0.342                              â”‚
  â”‚  é€‰å®šä¸ªä½“ID: #847  Age: 1,234  Gen: 23             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¬¬ä¹éƒ¨åˆ†ï¼šä¸æ„è¯†å®éªŒçš„æ•´åˆ

### 9.1 å®éªŒå¯¹è±¡é€‰æ‹©

```
é—®é¢˜ï¼š
  50-100ä¸ªä¸ªä½“åŒæ—¶è¿è¡Œ
  æ„è¯†å®éªŒåº”è¯¥åœ¨å“ªä¸ªä¸ªä½“ä¸Šåšï¼Ÿ

ç­–ç•¥ï¼š
  
  æ–¹æ¡ˆAï¼šå¯¹æœ€é•¿å¯¿çš„ä¸ªä½“åšå®éªŒ
    é€‰æ‹©å½“å‰å­˜æ´»æœ€ä¹…çš„ä¸ªä½“
    å®ƒçš„ç½‘ç»œæœ€"æˆç†Ÿ"
    æœ€å¯èƒ½æ¶Œç°å‡ºè‡ªæˆ‘æ„è¯†æ ‡å¿—
    
  æ–¹æ¡ˆBï¼šå¯¹æœ€ä¼˜åŸºå› ç»„çš„æ–°ä¸ªä½“åšå®éªŒ
    ä»ç§ç¾¤ä¸­æå–å½“å‰æœ€ä¼˜åŸºå› ç»„
    ç”¨è¯¥åŸºå› ç»„å•ç‹¬åˆ›å»ºä¸€ä¸ªGenesisAgent
    åœ¨ç‹¬ç«‹ç¯å¢ƒä¸­è¿è¡Œ10ä¸‡æ­¥æˆç†ŸæœŸ
    ç„¶åæ‰§è¡Œå®éªŒ1-4
    
    è¿™ä¸Phase 4-5çš„æµç¨‹å®Œå…¨ç›¸åŒ
    åªæ˜¯æ¶æ„æ¥è‡ªè¿›åŒ–è€Œéäººå·¥è®¾è®¡

  å»ºè®®ï¼šä¸¤ä¸ªéƒ½åš
    æ–¹æ¡ˆAï¼šè§‚å¯Ÿè¿ç»­è¿è¡Œä¸­çš„ä¸ªä½“æ˜¯å¦æ¶Œç°æ„è¯†æ ‡å¿—
    æ–¹æ¡ˆBï¼šæå–æœ€ä¼˜åŸºå› ç»„åšæ­£å¼å®éªŒ
```

### 9.2 è¿ç»­ç›‘æµ‹ä¸­çš„æ„è¯†æŒ‡æ ‡

```
åœ¨è¿ç»­ä»¿çœŸä¸­ï¼Œå¯¹æ‰€æœ‰å­˜æ´»ä¸ªä½“æŒç»­è®¡ç®—ï¼š

  æ¯ ANALYSIS_INTERVAL æ­¥ï¼š
    é€‰æ‹©å­˜æ´»æœ€ä¹…çš„å‰5ä¸ªä¸ªä½“
    å¯¹æ¯ä¸ªä¸ªä½“çš„æœ€è¿‘å†…éƒ¨çŠ¶æ€åšåˆ†æ
    æ£€æµ‹SVCå€™é€‰
    è®¡ç®—å†…éƒ¨çŠ¶æ€å¤æ‚åº¦
    
    å¦‚æœä»»ä½•ä¸ªä½“å‡ºç°SVCå€™é€‰ï¼š
    â†’ æ ‡è®°è¯¥ä¸ªä½“ä¸º"é‡ç‚¹è§‚å¯Ÿå¯¹è±¡"
    â†’ å¢åŠ è¯¥ä¸ªä½“çš„ç›‘æµ‹é¢‘ç‡
    â†’ å¦‚æœè¯¥ä¸ªä½“æ­»äº¡ï¼Œè®°å½•å…¶åŸºå› ç»„

  è¿™æ˜¯"è¢«åŠ¨ç›‘æµ‹"æ¨¡å¼ï¼š
    ä¸å¹²é¢„æ™ºèƒ½ä½“çš„ç”Ÿæ´»
    åªæ˜¯åœ¨æ—è¾¹è§‚å¯Ÿ
    å¦‚æœæœ‰è¶£çš„ä¸œè¥¿å‡ºç°ï¼Œè®°å½•ä¸‹æ¥
```

---

## ç¬¬åéƒ¨åˆ†ï¼šæ–½å·¥æ­¥éª¤ä¸éªŒæ”¶æ ‡å‡†

### ä»»åŠ¡ M.1ï¼šæ„Ÿå®˜ç³»ç»Ÿæ‰©å±•

```
æ–‡ä»¶ï¼šä¿®æ”¹ agent/sensory_encoder.py å’Œç›¸å…³æ–‡ä»¶

ä¿®æ”¹è¦æ±‚ï¼š
  è¾“å…¥ç»´åº¦ä»170æ‰©å±•åˆ°256
  æ–°å¢ç¤¾ä¼šè§†é‡é€šé“ï¼ˆ49ç»´ï¼‰
  æ–°å¢ç¹æ®–çŠ¶æ€é€šé“ï¼ˆ4ç»´ï¼‰
  ä¿ç•™32ç»´ä¿ç•™é€šé“

ç»™AIçš„æŒ‡ä»¤ï¼š
  "ä¿®æ”¹æ„Ÿå®˜ç¼–ç å™¨ï¼Œè¾“å…¥ç»´åº¦ä»170æ”¹ä¸º256ã€‚
   æ–°å¢é€šé“çš„å®šä¹‰å¦‚ä¸‹ï¼š
   [ç²˜è´´é€šé“åˆ†é…è¡¨]
   ä¿æŒå‘åå…¼å®¹ï¼šæœªæ¿€æ´»çš„é€šé“å…¨ä¸ºé›¶ã€‚
   æ–°é€šé“ä¸éœ€è¦ç‰¹æ®Šçš„ç¼–ç å™¨ç»“æ„ï¼Œ
   ç»Ÿä¸€é€šè¿‡åŒä¸€ä¸ªMLPå‹ç¼©ã€‚"

éªŒæ”¶æ ‡å‡†ï¼š
  â˜ è¾“å…¥ shape (256,) â†’ è¾“å‡º shape (encoded_dim,)
  â˜ å…¨é›¶è¾“å…¥ä¸å´©æºƒ
  â˜ ç¤¾ä¼šé€šé“æ­£ç¡®ç¼–ç ä¸åŒç±»å‹çš„ä¸ªä½“
  â˜ ç¹æ®–çŠ¶æ€é€šé“å€¼åœ¨[0,1]èŒƒå›´
  â˜ åŸæœ‰Phase 0-5ä»£ç ä»ç„¶èƒ½è¿è¡Œ
     ï¼ˆæœªæ¿€æ´»çš„é€šé“å…¨ä¸ºé›¶ï¼Œä¸å½±å“åŸæœ‰åŠŸèƒ½ï¼‰
```

å®Œå·¥æ—¥å¿— (2026-02-24):

1. `cogito/config.py` æ›´æ–° `SENSORY_DIM = 256`ï¼Œæ–°å¢ç¤¾ä¼š/ç¹æ®–é€šé“é¢„ç•™ã€‚

2. `cogito/agent/sensory_encoder.py` æ”¯æŒåŠ¨æ€è¾“å…¥ç»´åº¦ä¸é…ç½®é©±åŠ¨ã€‚

3. `cogito/world/grid.py` ä¸ `EvolutionWorld` å‡è¾“å‡º 256 ç»´è§‚å¯Ÿå‘é‡ã€‚

---

### ä»»åŠ¡ M.2ï¼šåŠ¨ä½œç©ºé—´æ‰©å±•

```
æ–‡ä»¶ï¼šä¿®æ”¹ agent/action_head.py

ä¿®æ”¹è¦æ±‚ï¼š
  åŠ¨ä½œæ•°ä»6æ‰©å±•åˆ°7
  ç¬¬7ä¸ªåŠ¨ä½œ(index=6)æ˜¯"äº¤äº’"

ç»™AIçš„æŒ‡ä»¤ï¼š
  "ä¿®æ”¹åŠ¨ä½œå¤´ï¼ŒåŠ¨ä½œæ•°ä»6æ”¹ä¸º7ã€‚
   æ–°å¢åŠ¨ä½œ6='äº¤äº’'ã€‚
   ä¿æŒå‘åå…¼å®¹ã€‚"

éªŒæ”¶æ ‡å‡†ï¼š
  â˜ ActionHead è¾“å‡º7ç»´logits
  â˜ select_action å¯ä»¥è¿”å› action=6
  â˜ æ‰€æœ‰7ä¸ªåŠ¨ä½œéƒ½èƒ½è¢«é‡‡æ ·åˆ°
  â˜ åŸæœ‰æµ‹è¯•ä»ç„¶é€šè¿‡ï¼ˆåªæ˜¯åŠ¨ä½œç©ºé—´å¤šäº†ä¸€ä¸ªï¼‰
```

å®Œå·¥æ—¥å¿— (2026-02-24):

1. `cogito/agent/action_head.py` æ”¯æŒ `num_actions` é…ç½®å‚æ•°ã€‚

2. `cogito/config.py` æ›´æ–° `NUM_ACTIONS = 7`ã€‚

3. `cogito/world/grid.py` æ–°å¢åŠ¨ä½œ 6ï¼ˆinteract no-opï¼‰å¹¶è¡¥æµ‹è¯•ã€‚

---

### ä»»åŠ¡ M.3ï¼šä¸ªä½“ç±»ï¼ˆç¹è¡ç‰ˆï¼‰

```
æ–‡ä»¶ï¼ševolution/individual.pyï¼ˆä¿®æ”¹ï¼‰

ç»™AIçš„æŒ‡ä»¤ï¼š
  "ä¿®æ”¹ Individual ç±»ï¼Œå¢åŠ ç¹è¡ç›¸å…³å±æ€§å’Œæ–¹æ³•ã€‚
   [ç²˜è´´ä¸ªä½“ç±»å®Œæ•´å®šä¹‰]
   å…³é”®æ–°å¢ï¼š
   - sex, age, mating_cooldown, is_fertile
   - compute_fertility()
   - get_sensory_self_state()
   - record_offspring()
   - die()æ—¶è®°å½•ç¹æ®–ç»Ÿè®¡
   ä¿æŒä¸åŸæœ‰è¿›åŒ–æ¨¡å—å…¼å®¹ã€‚"

éªŒæ”¶æ ‡å‡†ï¼š
  â˜ Individual åˆ›å»ºæ—¶æœ‰ sex å±æ€§ï¼ˆ0æˆ–1ï¼‰
  â˜ 100ä¸ªéšæœºä¸ªä½“çš„æ€§åˆ«æ¯”å¤§è‡´ 1:1
  â˜ age < MATURITY_AGE æ—¶ is_fertile == False
  â˜ energy < MATING_ENERGY_THRESHOLD æ—¶ is_fertile == False
  â˜ mating_cooldown > 0 æ—¶ is_fertile == False
  â˜ æ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³æ—¶ is_fertile == True
  â˜ get_sensory_self_state() è¿”å› shape (4,) çš„æ•°ç»„
  â˜ å€¼åœ¨ [0, 1] èŒƒå›´
  â˜ die() å brain is None
  â˜ stats åŒ…å« offspring_produced, mating_attempts, mating_successes
```

å®Œå·¥æ—¥å¿— (2026-02-24):

1. `cogito/evolution/individual.py` æ–°å¢ sex/age/mating_cooldown ç­‰ç¹è¡å­—æ®µã€‚

2. å®ç° `is_fertile` ä¸ `get_sensory_self_state()`ï¼Œå…¼å®¹è¿›åŒ–ä¸ç¹è¡æ¨¡å¼ã€‚

3. å•æµ‹è¦†ç›– fertility ä¸ self state å½¢çŠ¶èŒƒå›´ï¼ˆ`cogito/tests/test_evolution_population.py`ï¼‰ã€‚

---

### ä»»åŠ¡ M.4ï¼šè¿›åŒ–ä¸–ç•Œç±»

```
æ–‡ä»¶ï¼šworld/evolution_world.py

ç»™AIçš„æŒ‡ä»¤ï¼š
  "å®ç° EvolutionWorld ç±»ã€‚
   [ç²˜è´´è¿›åŒ–ä¸–ç•Œç±»å®Œæ•´å®šä¹‰]
   å…³é”®åŠŸèƒ½ï¼š
   1. å¤šä¸ªä½“ç®¡ç†
   2. ç¤¾ä¼šæ„ŸçŸ¥ç”Ÿæˆ
   3. äº¤é…å¤„ç†ï¼ˆåŒæ–¹éƒ½é€‰action=6 + ç›¸é‚» + å¼‚æ€§ + å¯è‚²ï¼‰
   4. åä»£äº§ç”Ÿå’Œæ”¾ç½®
   5. æ­»äº¡æ¸…ç†
   6. ç§ç¾¤ç»Ÿè®¡
   åŒ…å«å®Œæ•´æµ‹è¯•ã€‚"

éªŒæ”¶æ ‡å‡†ï¼š
  â˜ EvolutionWorld åˆ›å»ºæˆåŠŸ
  â˜ èƒ½æ·»åŠ 50ä¸ªä¸ªä½“
  â˜ get_observation() è¿”å› shape (256,) çš„æ•°ç»„
  â˜ ç¤¾ä¼šè§†é‡ä¸­æ­£ç¡®ç¼–ç å…¶ä»–ä¸ªä½“
  â˜ ä¸­å¿ƒæ ¼ç¼–ç ä¸º1.0ï¼ˆè‡ªå·±ï¼‰
  â˜ step() ä¸å´©æºƒ
  â˜ ä¸¤ä¸ªç›¸é‚»å¼‚æ€§å¯è‚²ä¸ªä½“éƒ½é€‰action=6 â†’ äº§ç”Ÿåä»£
  â˜ åªæœ‰ä¸€æ–¹é€‰action=6 â†’ ä¸äº§ç”Ÿåä»£
  â˜ åŒæ€§éƒ½é€‰action=6 â†’ ä¸äº§ç”Ÿåä»£
  â˜ ä¸ç›¸é‚»éƒ½é€‰action=6 â†’ ä¸äº§ç”Ÿåä»£
  â˜ æœªæˆå¹´é€‰action=6 â†’ ä¸äº§ç”Ÿåä»£
  â˜ èƒ½é‡ä¸è¶³é€‰action=6 â†’ ä¸äº§ç”Ÿåä»£
  â˜ å†·å´æœŸä¸­é€‰action=6 â†’ ä¸äº§ç”Ÿåä»£
  â˜ åä»£å‡ºç°åœ¨çˆ¶æ¯é™„è¿‘
  â˜ åä»£çš„èƒ½é‡ = BIRTH_ENERGY
  â˜ åä»£çš„åŸºå› ç»„æ˜¯çˆ¶æ¯çš„äº¤å‰+çªå˜
  â˜ ç§ç¾¤ä¸è¶…è¿‡ MAX_POPULATION
  â˜ æ­»äº¡ä¸ªä½“æ­£ç¡®ä»ä¸–ç•Œä¸­ç§»é™¤
  â˜ position_to_individual ç´¢å¼•å§‹ç»ˆä¸€è‡´
  â˜ è¿è¡Œ1000æ­¥ä¸å´©æºƒ
```

å®Œå·¥æ—¥å¿— (2026-02-24):

1. æ–°å¢ `cogito/world/evolution_world.py`ï¼Œå®ç°å¤šä½“ç®¡ç†ã€ç¤¾ä¼šæ„ŸçŸ¥ä¸äº¤é…å¤„ç†ã€‚

2. æ”¯æŒ strict / tolerant é…å¯¹æ¨¡å¼ã€å‡ºç”Ÿä½ç½®é€‰æ‹©ã€å†·å´æœŸä¸èƒ½é‡æ‰£é™¤ã€‚

3. `cogito/tests/test_reproduction.py` è¦†ç›–ä¸¥æ ¼/å®½å®¹é…å¯¹ä¸å¤±è´¥è¾¹ç•Œæ¡ä»¶ã€‚

---

### ä»»åŠ¡ M.5ï¼šç§ç¾¤å®ˆæŠ¤

```
æ–‡ä»¶ï¼ševolution/population_guard.py

ç»™AIçš„æŒ‡ä»¤ï¼š
  "å®ç° PopulationGuard ç±»ã€‚
   [ç²˜è´´ç§ç¾¤å®ˆæŠ¤çš„å®šä¹‰]
   å½“ç§ç¾¤ä½äºMIN_POPULATIONæ—¶æ³¨å…¥æ–°ä¸ªä½“ã€‚
   è®°å½•æ³¨å…¥äº‹ä»¶ã€‚"

éªŒæ”¶æ ‡å‡†ï¼š
  â˜ ç§ç¾¤ = 50 æ—¶ä¸æ³¨å…¥
  â˜ ç§ç¾¤ = 8 æ—¶æ³¨å…¥5ä¸ªæ–°ä¸ªä½“
  â˜ æ³¨å…¥çš„ä¸ªä½“ä½¿ç”¨éšæœºåŸºå› ç»„
  â˜ æ³¨å…¥äº‹ä»¶è¢«è®°å½•
  â˜ è¿ç»­æ³¨å…¥ä¸ä¼šè¶…è¿‡MAX_POPULATION
```

å®Œå·¥æ—¥å¿— (2026-02-24):

1. æ–°å¢ `cogito/evolution/population_guard.py`ï¼Œå®ç°é˜²ç­ç»æ³¨å…¥æœºåˆ¶ã€‚

2. æ”¯æŒ sampled æ³¨å…¥ç­–ç•¥ï¼šä»å­˜æ´»ä¸ªä½“é‡‡æ ·å¹¶çªå˜åæ³¨å…¥ã€‚

3. æµ‹è¯•è¦†ç›–æ³¨å…¥è§¦å‘ä¸äº‹ä»¶è®°å½•ï¼ˆ`cogito/tests/test_reproduction.py`ï¼‰ã€‚

---

### ä»»åŠ¡ M.6ï¼šè¿›åŒ–ç›‘æµ‹

```
æ–‡ä»¶ï¼šmonitoring/evolution_monitor.py

ç»™AIçš„æŒ‡ä»¤ï¼š
  "å®ç° EvolutionMonitor ç±»ã€‚
   [ç²˜è´´ç›‘æµ‹æŒ‡æ ‡å®šä¹‰]
   è·Ÿè¸ªç§ç¾¤åŠ¨æ€ã€åŸºå› ç»„è¶‹åŠ¿ã€ç¹æ®–ç»Ÿè®¡ã€‚
   åŒ…å«ç»˜å›¾åŠŸèƒ½ã€‚"

éªŒæ”¶æ ‡å‡†ï¼š
  â˜ record() æ­£ç¡®è®°å½•æ‰€æœ‰æŒ‡æ ‡
  â˜ è¿è¡Œ1000æ­¥åæ‰€æœ‰å†å²åˆ—è¡¨é•¿åº¦ä¸€è‡´
  â˜ ç§ç¾¤å¤§å°æ›²çº¿å¯ç»˜åˆ¶
  â˜ åŸºå› ç»„è¶‹åŠ¿æ›²çº¿å¯ç»˜åˆ¶
  â˜ å‡ºç”Ÿ/æ­»äº¡ç‡æ›²çº¿å¯ç»˜åˆ¶
```

å®Œå·¥æ—¥å¿— (2026-02-24):

1. æ–°å¢ `cogito/monitoring/evolution_monitor.py` è®°å½•ç§ç¾¤åŠ¨æ€ä¸åŸºå› ç»„å‡å€¼ã€‚

2. æ”¯æŒå†å²ä¿å­˜ä¸ç»˜å›¾æ¥å£ã€‚

3. `cogito/tests/test_reproduction.py` è¦†ç›–è®°å½•æµç¨‹ã€‚

---

### ä»»åŠ¡ M.7ï¼šè¿ç»­ä»¿çœŸä¸»å¾ªç¯

```
æ–‡ä»¶ï¼šcore/evolution_simulation.pyï¼ˆä¿®æ”¹ä¸ºè¿ç»­æ¨¡å¼ï¼‰

ç»™AIçš„æŒ‡ä»¤ï¼š
  "ä¿®æ”¹ EvolutionSimulation ä¸ºè¿ç»­æ¨¡å¼ã€‚
   ä½¿ç”¨ EvolutionWorld æ›¿ä»£ GenesisWorldã€‚
   ä¸»å¾ªç¯ï¼š
   1. world.step()
   2. population_guard.check_and_inject()
   3. evolution_monitor.record()
   4. æ‰“å°ç»Ÿè®¡
   5. ä¿å­˜æ£€æŸ¥ç‚¹
   
   ä¸å†æœ‰ä»£é™…æ¦‚å¿µã€‚
   ä¸ªä½“åœ¨ä¸–ç•Œä¸­è‡ªç„¶å‡ºç”Ÿå’Œæ­»äº¡ã€‚
   äº¤é…åœ¨ä¸–ç•Œä¸­è‡ªç„¶å‘ç”Ÿã€‚"

éªŒæ”¶æ ‡å‡†ï¼š
  â˜ å°è§„æ¨¡æµ‹è¯•ï¼ˆ50ä¸ªä½“ï¼Œ10000æ­¥ï¼‰ä¸å´©æºƒ
  â˜ ç§ç¾¤å¤§å°æœ‰æ³¢åŠ¨ï¼ˆä¸æ˜¯æ’å®šçš„ï¼‰
  â˜ æœ‰å‡ºç”Ÿäº‹ä»¶å‘ç”Ÿ
  â˜ æœ‰æ­»äº¡äº‹ä»¶å‘ç”Ÿ
  â˜ æœ‰äº¤é…äº‹ä»¶å‘ç”Ÿ
  â˜ åŸºå› ç»„åœ¨ä»£é™…é—´æœ‰å˜åŒ–
  â˜ ç»Ÿè®¡æ‰“å°æ­£å¸¸
  â˜ æ£€æŸ¥ç‚¹ä¿å­˜æ­£å¸¸
  â˜ 10000æ­¥è¿è¡Œæ—¶é—´ < 10åˆ†é’Ÿï¼ˆCPUï¼‰
```

å®Œå·¥æ—¥å¿— (2026-02-24):

1. `cogito/core/evolution_simulation.py` å¢åŠ è¿ç»­æ¨¡å¼ä¸»å¾ªç¯ã€‚

2. è¿ç»­æ¨¡å¼é›†æˆ `EvolutionWorld` + `PopulationGuard` + `EvolutionMonitor`ã€‚

3. æ£€æŸ¥ç‚¹ä¿å­˜å·²æ¥å…¥ï¼Œå¾…å°è§„æ¨¡è¿è¡ŒéªŒè¯ã€‚

---

### ä»»åŠ¡ M.8ï¼šé›†æˆæµ‹è¯•

```
æ–‡ä»¶ï¼štests/test_reproduction.py

æµ‹è¯•åœºæ™¯ï¼š

  åœºæ™¯1ï¼šåŸºæœ¬ç¹æ®–
    åˆ›å»º2ä¸ªä¸ªä½“ï¼ˆ1â™‚1â™€ï¼‰ï¼Œæ”¾åœ¨ç›¸é‚»ä½ç½®
    è®¾ç½®èƒ½é‡å……è¶³ã€å·²æˆå¹´ã€å†·å´å®Œ
    å¼ºåˆ¶ä¸¤è€…éƒ½é€‰action=6
    éªŒè¯äº§ç”Ÿåä»£
    éªŒè¯åä»£çš„åŸºå› ç»„ã€ä½ç½®ã€èƒ½é‡æ­£ç¡®
    
  åœºæ™¯2ï¼šæ¡ä»¶ä¸æ»¡è¶³
    æµ‹è¯•æ‰€æœ‰"ä¸åº”è¯¥äº¤é…"çš„è¾¹ç•Œæƒ…å†µ
    ï¼ˆåŒæ€§ã€æœªæˆå¹´ã€èƒ½é‡ä¸è¶³ã€ä¸ç›¸é‚»ã€å†·å´ä¸­ã€å•æ–¹é¢ï¼‰
    
  åœºæ™¯3ï¼šç§ç¾¤åŠ¨æ€
    50ä¸ªä¸ªä½“è¿è¡Œ10000æ­¥
    ç»Ÿè®¡å‡ºç”Ÿã€æ­»äº¡ã€äº¤é…æ¬¡æ•°
    éªŒè¯ç§ç¾¤å¤§å°åœ¨åˆç†èŒƒå›´
    
  åœºæ™¯4ï¼šåŸºå› ç»„ä¼ æ’­
    è¿½è¸ªä¸€ä¸ªç‰¹å®šåŸºå› 
    éªŒè¯å®ƒé€šè¿‡äº¤é…ä¼ é€’åˆ°åä»£
    éªŒè¯äº¤å‰å’Œçªå˜åœ¨æ­£å¸¸å·¥ä½œ
    
  åœºæ™¯5ï¼šç­ç»æ¢å¤
    äººä¸ºæ€æ­»å¤§éƒ¨åˆ†ä¸ªä½“åˆ°ä½äºMIN_POPULATION
    éªŒè¯æ–°ä¸ªä½“è¢«æ³¨å…¥
    éªŒè¯ç§ç¾¤æ¢å¤

éªŒæ”¶æ ‡å‡†ï¼š
  â˜ åœºæ™¯1-5å…¨éƒ¨é€šè¿‡
  â˜ æ— å´©æºƒ
  â˜ æ— NaN
  â˜ æ— æ— é™å¾ªç¯
  â˜ ä½ç½®ç´¢å¼•ä¸€è‡´æ€§æ£€æŸ¥é€šè¿‡
```

å®Œå·¥æ—¥å¿— (2026-02-24):

1. æ–°å¢ `cogito/tests/test_reproduction.py` è¦†ç›–ä¸¥æ ¼/å®½å®¹äº¤é…ä¸æ³¨å…¥æœºåˆ¶ã€‚

2. é›†æˆæµ‹è¯•å·²å®ç°ï¼Œå¾…è¿è¡ŒéªŒè¯ã€‚

---

### ä»»åŠ¡ M.9ï¼šé•¿æ—¶é—´è¿è¡Œä¸åˆ†æ

```
æ–‡ä»¶ï¼šrun_continuous_evolution.py

è¿è¡Œï¼š
  50ä¸ªåˆå§‹ä¸ªä½“
  500,000æ­¥
  é¢„è®¡è¿è¡Œæ—¶é—´ï¼šæ•°å°æ—¶ï¼ˆCPUï¼‰
  
  å¯å…ˆç”¨ 50,000 æ­¥éªŒè¯

åˆ†æï¼š
  1. ç§ç¾¤å¤§å°æ›²çº¿
  2. å‡ºç”Ÿ/æ­»äº¡ç‡æ›²çº¿
  3. åŸºå› ç»„å‚æ•°æ”¶æ•›å›¾
  4. å¤šæ ·æ€§æ›²çº¿
  5. ä»£æ•°ï¼ˆgenerationï¼‰å¢é•¿æ›²çº¿
  6. å¹³å‡å¯¿å‘½è¶‹åŠ¿
  7. æœ€ç»ˆç§ç¾¤çš„åŸºå› ç»„åˆ†å¸ƒ
  8. å®¶æ—æ ‘ï¼ˆå‰Nä»£çš„è°±ç³»å›¾ï¼‰

éªŒæ”¶æ ‡å‡†ï¼š
  â˜ 50,000æ­¥éªŒè¯è¿è¡Œå®Œæˆ
  â˜ ç§ç¾¤æ²¡æœ‰ç­ç»ï¼ˆæˆ–ç­ç»åè¢«æ³¨å…¥æ¢å¤ï¼‰
  â˜ æœ‰è‡ªç„¶å‡ºç”Ÿçš„åä»£ï¼ˆä¸å…¨æ˜¯æ³¨å…¥çš„ï¼‰
  â˜ generation æ•°åœ¨å¢é•¿
  â˜ åŸºå› ç»„æœ‰æ”¶æ•›è¶‹åŠ¿
  â˜ æ‰€æœ‰åˆ†æå›¾ç”Ÿæˆ
  
  â˜ 500,000æ­¥å®Œæ•´è¿è¡Œå®Œæˆ
  â˜ ç§ç¾¤ç¨³å®šåœ¨æŸä¸ªèŒƒå›´
  â˜ åŸºå› ç»„è‡³å°‘éƒ¨åˆ†å‚æ•°æ”¶æ•›
```

å®Œå·¥æ—¥å¿— (2026-02-24):

1. æ–°å¢ `run_continuous_evolution.py` ä¸ `ContinuousEvolutionAnalyzer` åˆ†æè¾“å‡ºã€‚

2. æ”¯æŒ 50,000 æ­¥å°è§„æ¨¡æ¨¡å¼ä¸ç§ç¾¤åˆ†æå›¾ç”Ÿæˆã€‚

3. é•¿æ—¶é—´è¿è¡Œä¸éªŒæ”¶å°šæœªæ‰§è¡Œï¼Œç­‰å¾…å®é™…è¿è¡ŒéªŒè¯ã€‚

---

## ç¬¬åä¸€éƒ¨åˆ†ï¼šæ—¶é—´çº¿

```
åœ¨Phase 5ä¹‹åï¼ŒPhase 6çš„è¿›åŒ–æ¨¡å—ä¹‹åæ‰§è¡Œ

  Week 1 (M.1-M.3)ï¼š
    â˜ æ„Ÿå®˜ç³»ç»Ÿæ‰©å±•ï¼ˆ256ç»´ï¼‰
    â˜ åŠ¨ä½œç©ºé—´æ‰©å±•ï¼ˆ7åŠ¨ä½œï¼‰
    â˜ ä¸ªä½“ç±»ç¹è¡å±æ€§
    éªŒè¯åŸæœ‰ä»£ç å…¼å®¹æ€§

  Week 2 (M.4-M.6)ï¼š
    â˜ è¿›åŒ–ä¸–ç•Œç±»
    â˜ ç§ç¾¤å®ˆæŠ¤
    â˜ è¿›åŒ–ç›‘æµ‹
    é›†æˆæµ‹è¯•ï¼ˆM.8çš„åœºæ™¯1-5ï¼‰

  Week 3 (M.7-M.9)ï¼š
    â˜ è¿ç»­ä»¿çœŸä¸»å¾ªç¯
    â˜ å°è§„æ¨¡éªŒè¯ï¼ˆ50,000æ­¥ï¼‰
    â˜ å®Œæ•´è¿è¡Œå¯åŠ¨ï¼ˆ500,000æ­¥ï¼‰

  Week 4ï¼š
    â˜ å®Œæ•´è¿è¡Œå®Œæˆ
    â˜ æ•°æ®åˆ†æ
    â˜ æå–æœ€ä¼˜åŸºå› ç»„
    â˜ åœ¨æœ€ä¼˜åŸºå› ç»„ä¸Šè¿è¡Œæ„è¯†å®éªŒ

  git commit -m "Phase 7 complete: reproduction and continuous evolution"
```

---

## ç¬¬åäºŒéƒ¨åˆ†ï¼šä¸ä½ çš„åŸæ–¹æ¡ˆçš„å·®å¼‚æ€»ç»“

```
ä¿ç•™äº†ä½ çš„ï¼š
  âœ“ ä¸–ç•Œå†…äº¤é…ï¼ˆä¸æ˜¯åå°æ“ä½œï¼‰
  âœ“ äº¤é…æ¶ˆè€—èƒ½é‡
  âœ“ æ€§åˆ«å·®å¼‚
  âœ“ å†·å´æœŸ
  âœ“ åä»£åœ¨çˆ¶æ¯é™„è¿‘å‡ºç”Ÿ
  âœ“ ç§ç¾¤å¤§å°åŠ¨æ€å˜åŒ–
  âœ“ è¿ç»­æ¨¡æ‹Ÿæ¨¡å¼

æ”¹å˜äº†ï¼š
  âœ— è‡ªåŠ¨äº¤é… â†’ âœ“ äº¤é…æ˜¯åŠ¨ä½œç©ºé—´ä¸­çš„é€‰æ‹©ï¼ˆaction=6ï¼‰
  âœ— 5æ­¥äº¤é…è¿‡ç¨‹ â†’ âœ“ ç¬æ—¶äº¤é…ï¼ˆç®€åŒ–å¤„ç†ï¼Œé¿å…è¾¹ç•Œæƒ…å†µï¼‰
  âœ— libidoç›´æ¥å½±å“è¡Œä¸º â†’ âœ“ libidoåªä½œä¸ºå¯è‚²æ€§åˆ¤æ–­çš„ä¸€éƒ¨åˆ†
  âœ— æ— ç¤¾ä¼šæ„ŸçŸ¥ â†’ âœ“ æ™ºèƒ½ä½“èƒ½çœ‹åˆ°å…¶ä»–ä¸ªä½“
  âœ— 170ç»´æ„Ÿå®˜ â†’ âœ“ 256ç»´æ„Ÿå®˜ï¼ˆé¢„ç•™æœªæ¥æ‰©å±•ï¼‰

æ–°å¢äº†ï¼š
  â˜… ç§ç¾¤ç­ç»ä¿æŠ¤
  â˜… èµ„æºå¯†åº¦åŠ¨æ€è°ƒæ•´
  â˜… ä¸æ„è¯†å®éªŒçš„æ•´åˆæ–¹æ¡ˆ
  â˜… è¿ç»­æ„è¯†ç›‘æµ‹
  â˜… å®¶æ—è°±ç³»è¿½è¸ª
```


è¡¥å……ï¼š


# ä¸‰ä¸ªé—®é¢˜çš„ç›´æ¥å›ç­”

---

## é—®é¢˜ä¸€ï¼šäº¤é…æˆåŠŸçš„åé¦ˆ

ä½ è¯´å¾—å¯¹ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªçœŸå®çš„é—®é¢˜ã€‚

```
å½“å‰è®¾è®¡ä¸‹ï¼Œæ™ºèƒ½ä½“é€‰action=6ä¹‹åçœ‹åˆ°çš„æ˜¯ï¼š

  æƒ…å†µAï¼ˆäº¤é…æˆåŠŸï¼‰ï¼šèƒ½é‡ -15ï¼Œé™„è¿‘å‡ºç°ä¸€ä¸ªæ–°ä¸ªä½“
  æƒ…å†µBï¼ˆäº¤é…å¤±è´¥ï¼‰ï¼šç­‰åŒäº"ç­‰å¾…"ï¼Œèƒ½é‡ -1
  æƒ…å†µCï¼ˆæ¡ä»¶ä¸è¶³ï¼‰ï¼šç­‰åŒäº"ç­‰å¾…"ï¼Œèƒ½é‡ -1

ä»æ™ºèƒ½ä½“çš„è§’åº¦ï¼š
  æˆåŠŸäº¤é… = æƒ©ç½šï¼ˆä¸¢èƒ½é‡ï¼‰
  å¤±è´¥äº¤é… = ä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿ
  â†’ æ²¡æœ‰ä»»ä½•æ­£å‘ä¿¡å·
  â†’ ä¸ªä½“å­¦ä¹ æ°¸è¿œä¸ä¼šå­¦ä¼šä¸»åŠ¨äº¤é…
```

### è§£å†³æ–¹æ¡ˆï¼šäº¤é…æ˜¯è¿›åŒ–è¡Œä¸ºï¼Œä¸æ˜¯å­¦ä¹ è¡Œä¸º

```
å…³é”®è®¤çŸ¥ï¼š
  ä¸æ˜¯æ¯ç§è¡Œä¸ºéƒ½éœ€è¦é€šè¿‡ä¸ªä½“å­¦ä¹ è·å¾—
  åœ¨çœŸå®ç”Ÿç‰©ä¸­ï¼Œäº¤é…å†²åŠ¨æ˜¯è¿›åŒ–ç¡¬ç¼–ç çš„
  è€é¼ ä¸éœ€è¦"å­¦ä¹ "äº¤é…çš„å¥½å¤„
  å®ƒçš„å¤§è„‘ç»“æ„å°±è®©å®ƒåœ¨ç‰¹å®šæ¡ä»¶ä¸‹äº§ç”Ÿäº¤é…è¡Œä¸º

  åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼š
  åŸºå› ç»„å†³å®šäº†ç½‘ç»œæ¶æ„
  ä¸åŒçš„æ¶æ„åœ¨é¢å¯¹"æ—è¾¹æœ‰å¼‚æ€§æˆå¹´ä¸ªä½“"çš„æ„Ÿå®˜æ¨¡å¼æ—¶
  ä¼šäº§ç”Ÿä¸åŒçš„åŠ¨ä½œåˆ†å¸ƒ
  æŸäº›æ¶æ„æ°å¥½æ›´å®¹æ˜“åœ¨è¿™ç§æ¨¡å¼ä¸‹è¾“å‡ºaction=6
  è¿™äº›æ¶æ„çš„åŸºå› ç»„é€šè¿‡ç¹æ®–ä¼ æ’­
  â†’ è¿›åŒ–é€‰æ‹©"å®¹æ˜“äº¤é…çš„æ¶æ„"
  â†’ ä¸éœ€è¦ä¸ªä½“å­¦ä¹ 
```

### ä½†ä½ æŒ‡å‡ºäº†ä¸€ä¸ªçœŸå®çš„å¼•å¯¼é—®é¢˜

```
å¼•å¯¼é—®é¢˜ï¼š
  å¦‚æœæ²¡æœ‰ä»»ä½•ä¸ªä½“å¶ç„¶äº¤é…æˆåŠŸ
  è¿›åŒ–å°±æ— æ³•å¼€å§‹é€‰æ‹©
  
  action=6çš„éšæœºæ¦‚ç‡ = 1/7 â‰ˆ 14%
  ä¸¤ä¸ªç›¸é‚»ä¸ªä½“åŒæ—¶é€‰6 = (1/7)Â² â‰ˆ 2%
  ä¸¤ä¸ªç›¸é‚» + å¼‚æ€§ + åŒæ–¹å¯è‚² + åŒæ—¶é€‰6 = æä½æ¦‚ç‡

  è¿™å¯èƒ½å¯¼è‡´å‰å‡ åƒæ­¥å®Œå…¨æ²¡æœ‰äº¤é…
  ç§ç¾¤åªä¼šå‡å°‘ä¸ä¼šå¢åŠ 
  æœ€ç»ˆä¾èµ–æ³¨å…¥ç»´æŒ
```

### æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼šåˆ†å±‚äº¤é…è§„åˆ™

```
ä¸ç»™äº¤é…ä»»ä½•å¥–åŠ±
ä½†é™ä½äº¤é…å‘ç”Ÿçš„é—¨æ§›

æ–¹æ¡ˆï¼šäº¤äº’åŠ¨ä½œçš„"å®½å®¹åŒ¹é…"

  ä¸¥æ ¼åŒ¹é…ï¼ˆä½ çš„åŸæ–¹æ¡ˆï¼‰ï¼š
    Aé€‰action=6 AND Bé€‰action=6 â†’ äº¤é…
    æ¦‚ç‡å¤ªä½

  å®½å®¹åŒ¹é…ï¼ˆæˆ‘çš„å»ºè®®ï¼‰ï¼š
    Aé€‰action=6 AND Bé€‰ä»»ä½•éç§»åŠ¨åŠ¨ä½œ(4,5,6) â†’ äº¤é…
    
    å«ä¹‰ï¼š
    åªéœ€è¦ä¸€æ–¹"ä¸»åŠ¨"ï¼ˆé€‰æ‹©äº¤äº’ï¼‰
    å¦ä¸€æ–¹åªè¦"æ²¡æœ‰èµ°å¼€"ï¼ˆé€‰äº†åƒ/ç­‰å¾…/äº¤äº’ï¼‰
    
    è¿™æ›´æ¥è¿‘ç”Ÿç‰©å­¦ï¼š
    ä¸€æ–¹æ±‚å¶ï¼Œå¦ä¸€æ–¹"æ²¡æ‹’ç»"å°±ç®—åŒæ„
    
    æ¦‚ç‡æå‡ï¼š
    Aé€‰6çš„æ¦‚ç‡ = 1/7 â‰ˆ 14%
    Bé€‰4,5,6çš„æ¦‚ç‡ = 3/7 â‰ˆ 43%
    åŒæ—¶å‘ç”Ÿ â‰ˆ 6%ï¼ˆç›¸æ¯”åŸæ¥çš„2%æå‡3å€ï¼‰
    
    åŠ ä¸Šç›¸é‚»+å¼‚æ€§+å¯è‚²çš„æ¡ä»¶
    ä»ç„¶æ˜¯è¾ƒä½æ¦‚ç‡
    ä½†è¶³ä»¥è®©è¿›åŒ–å¯åŠ¨

  è€Œä¸”è¿™ä¸è¿åé“å¾‹ï¼š
  æˆ‘ä»¬æ²¡æœ‰ç»™äº¤é…å¥–åŠ±
  æˆ‘ä»¬åªæ˜¯å®šä¹‰äº†"äº¤äº’åŠ¨ä½œåœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹äº§ç”Ÿä»€ä¹ˆæ•ˆæœ"
  è¿™å’Œ"åƒåŠ¨ä½œåœ¨é£Ÿç‰©æ ¼å­ä¸Šæ‰æœ‰æ•ˆæœ"æ˜¯åŒä¸€ç±»è§„åˆ™
```

### å…³äºæ„Ÿå®˜åé¦ˆ

```
äº¤é…æˆåŠŸåï¼Œæ™ºèƒ½ä½“èƒ½è‡ªç„¶è§‚å¯Ÿåˆ°çš„å˜åŒ–ï¼š

  1. èƒ½é‡ä¸‹é™ï¼ˆ-15ï¼‰
     â†’ å·²ç»åœ¨æ„Ÿå®˜ä¸­ï¼ˆä½ç½®98ï¼šèƒ½é‡å€¼ï¼‰
  
  2. é™„è¿‘å‡ºç°æ–°ä¸ªä½“ï¼ˆåä»£ï¼‰
     â†’ å·²ç»åœ¨ç¤¾ä¼šè§†é‡ä¸­ï¼ˆä½ç½®170-218ï¼‰
     â†’ æ™ºèƒ½ä½“ä¸‹ä¸€æ­¥ä¼šçœ‹åˆ°æ—è¾¹å¤šäº†ä¸€ä¸ª"å¹¼å¹´ä¸ªä½“"
  
  3. å†·å´æœŸå¼€å§‹
     â†’ å·²ç»åœ¨ç¹æ®–çŠ¶æ€ä¸­ï¼ˆä½ç½®221ï¼‰
     â†’ ä»0å˜ä¸º1.0ç„¶åé€æ¸è¡°å‡

è¿™ä¸‰ä¸ªå˜åŒ–éƒ½æ˜¯è‡ªç„¶çš„æ„Ÿå®˜å˜åŒ–
ä¸éœ€è¦é¢å¤–æ·»åŠ ä»»ä½•"æ»¡è¶³æ„Ÿä¿¡å·"
æ™ºèƒ½ä½“èƒ½å¦ä»è¿™äº›å˜åŒ–ä¸­"å­¦åˆ°"ä»€ä¹ˆ
å®Œå…¨å–å†³äºå®ƒè‡ªå·±

å¦‚æœæŸä¸ªæ¶æ„æ°å¥½èƒ½ä»"é™„è¿‘å‡ºç°æ–°ä¸ªä½“"ä¸­
æå–å‡ºæŸç§æ­£å‘ä¿¡å·
é‚£è¿™ä¸ªæ¶æ„å°±æ›´å®¹æ˜“ç¹æ®–
è¿›åŒ–ä¼šé€‰æ‹©å®ƒ
```

---

## é—®é¢˜äºŒï¼šå­¦ä¹ ä¿¡å·ä¸è¿›åŒ–å¼•å¯¼æ—¶é—´

ä½ çš„æ‹…å¿§å®Œå…¨æ­£ç¡®ï¼šå¯èƒ½éœ€è¦ç­‰å¾…å¾ˆå¤šä»£ã€‚

### è¯šå®çš„æ—¶é—´ä¼°ç®—

```
å‡è®¾ï¼š
  ç§ç¾¤50ä¸ªä½“
  æ¯æ­¥æ¯ä¸ªä¸ªä½“æœ‰ ~0.1% çš„æ¦‚ç‡ä¸å¯è‚²å¼‚æ€§ç›¸é‚»
  ï¼ˆå–å†³äºç§ç¾¤å¯†åº¦ã€æ€§åˆ«æ¯”ã€å¹´é¾„åˆ†å¸ƒï¼‰
  
  ä½¿ç”¨å®½å®¹åŒ¹é…ï¼š
  ç›¸é‚» Ã— å¼‚æ€§ Ã— åŒæ–¹å¯è‚² Ã— ä¸€æ–¹é€‰action=6 Ã— å¦ä¸€æ–¹ä¸èµ°å¼€
  â‰ˆ 0.001 Ã— 0.5 Ã— 0.3 Ã— 0.14 Ã— 0.43
  â‰ˆ 0.000009 æ¯æ­¥æ¯å¯¹
  
  50ä¸ªä½“æœ‰ ~50*49/2 â‰ˆ 1225 å¯¹
  æ¯æ­¥å‘ç”Ÿäº¤é…çš„æ¦‚ç‡ â‰ˆ 1225 Ã— 0.000009 â‰ˆ 0.011
  â†’ å¤§çº¦æ¯90æ­¥ä¸€æ¬¡äº¤é…
  
  è¿™æ¯”æƒ³è±¡çš„å¥½
  ä½†å‰ææ˜¯"ç§ç¾¤ä¸­æœ‰è¶³å¤Ÿå¤šå¯è‚²ä¸ªä½“"
  
  å¦‚æœå¹³å‡å¯¿å‘½åªæœ‰200æ­¥
  å¾ˆå¤šä¸ªä½“æ´»ä¸åˆ°æˆå¹´ï¼ˆ200æ­¥ï¼‰
  å¯è‚²ä¸ªä½“æ¯”ä¾‹ä¼šæ›´ä½
  
  æ›´ç°å®çš„ä¼°ç®—ï¼š
  å¯èƒ½å‰5000-10000æ­¥æ‰ä¼šæœ‰ç¬¬ä¸€æ¬¡äº¤é…
  å‰50000æ­¥å¯èƒ½åªæœ‰å‡ åæ¬¡äº¤é…
  çœŸæ­£çš„è¿›åŒ–é€‰æ‹©éœ€è¦ 100,000+ æ­¥æ‰èƒ½æ˜¾ç°
```

### åŠ é€Ÿæ–¹æ¡ˆï¼ˆä¸è¿åé“å¾‹ï¼‰

```
æ–¹æ¡ˆ1ï¼šé™ä½æˆå¹´å¹´é¾„
  MATURITY_AGE = 200 â†’ 100
  æ›´å¤šä¸ªä½“èƒ½æ´»åˆ°æˆå¹´
  å¯è‚²ä¸ªä½“æ¯”ä¾‹ä¸Šå‡
  äº¤é…æœºä¼šå¢å¤š
  
  è¿™ä¸æ˜¯åœ¨ç¼–ç¨‹è¡Œä¸º
  è¿™æ˜¯åœ¨è®¾ç½®"ç‰©ç†è§„åˆ™"
  ç±»ä¼¼äºæŸäº›ç‰©ç§æˆç†Ÿå¾—å¿«

æ–¹æ¡ˆ2ï¼šé™ä½äº¤é…èƒ½é‡é—¨æ§›
  MATING_ENERGY_THRESHOLD = 40 â†’ 25
  æ›´å¤šä¸ªä½“æ»¡è¶³èƒ½é‡æ¡ä»¶
  
æ–¹æ¡ˆ3ï¼šç¼©çŸ­å†·å´æœŸ
  MATING_COOLDOWN = 100 â†’ 50
  ä¸ªä½“èƒ½æ›´é¢‘ç¹äº¤é…

æ–¹æ¡ˆ4ï¼šæé«˜åˆå§‹èƒ½é‡
  BIRTH_ENERGY = 50 â†’ 70
  åä»£å­˜æ´»åˆ°æˆå¹´çš„æ¦‚ç‡æ›´é«˜

æ–¹æ¡ˆ5ï¼šåˆå§‹ç§ç¾¤å¯†åº¦
  WORLD_SIZE = 64 â†’ 32ï¼ˆåˆæœŸç”¨å°åœ°å›¾ï¼‰
  ä¸ªä½“æ›´å®¹æ˜“ç›¸é‡
  å½“ç§ç¾¤ç¨³å®šåå¯ä»¥æ‰©å¤§åœ°å›¾
  
  æˆ–è€…ä¿æŒ64Ã—64ä½†åˆå§‹ç§ç¾¤æ”¾åœ¨åŒä¸€åŒºåŸŸ
  è®©ä¸ªä½“ä¸€å¼€å§‹å°±æ¯”è¾ƒå¯†é›†

æ¨èç»„åˆï¼š
  MATURITY_AGE = 100
  MATING_ENERGY_THRESHOLD = 25
  MATING_COOLDOWN = 50
  BIRTH_ENERGY = 60
  åˆå§‹ç§ç¾¤é›†ä¸­åœ¨ä¸€ä¸ª20Ã—20åŒºåŸŸå†…
  
  è¿™äº›éƒ½æ˜¯"ä¸–ç•Œè§„åˆ™"ä¸æ˜¯"è¡Œä¸ºç¼–ç¨‹"
  åŠ é€Ÿäº†ç¹æ®–ä½†æ²¡æœ‰å‘Šè¯‰æ™ºèƒ½ä½“"å»äº¤é…"
```

### æ›´æ ¹æœ¬çš„å›ç­”

```
ä½ é—®"æ™ºèƒ½ä½“å¦‚ä½•å­¦ä¼šé€‰action=6"
ç­”æ¡ˆæ˜¯ï¼šå•ä¸ªä¸ªä½“å¯èƒ½æ°¸è¿œå­¦ä¸ä¼š

è¿™ä¸æ˜¯bugï¼Œè¿™æ˜¯feature

åœ¨çœŸå®ç”Ÿç‰©ä¸­ï¼š
  äº¤é…è¡Œä¸ºä¸æ˜¯ä¸ªä½“å­¦ä¹ çš„
  è€Œæ˜¯è¿›åŒ–ç¡¬ç¼–ç åœ¨ç¥ç»ç»“æ„ä¸­çš„
  
  è€é¼ å¤§è„‘çš„ä¸‹ä¸˜è„‘ç»“æ„
  åœ¨ç‰¹å®šæ¿€ç´ æ°´å¹³ä¸‹
  è‡ªåŠ¨äº§ç”Ÿäº¤é…è¡Œä¸º
  ä¸éœ€è¦"å­¦ä¹ "äº¤é…çš„å¥½å¤„
  
  å¦‚æœè€é¼ éœ€è¦é€šè¿‡è¯•é”™æ¥å­¦ä¹ äº¤é…
  è€é¼ æ—©å°±ç­ç»äº†

åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼š
  åŸºå› ç»„æ§åˆ¶ç½‘ç»œæ¶æ„
  æŸäº›æ¶æ„åœ¨æ„ŸçŸ¥åˆ°"æ—è¾¹æœ‰æˆå¹´å¼‚æ€§"æ—¶
  æ°å¥½æ›´å®¹æ˜“è¾“å‡ºaction=6
  è¿™ä¸æ˜¯"å­¦ä¹ "çš„ç»“æœ
  è€Œæ˜¯"æ¶æ„"çš„å¶ç„¶å±æ€§
  
  è¿›åŒ–é€‰æ‹©è¿™æ ·çš„æ¶æ„
  ç»è¿‡è¶³å¤Ÿå¤šä»£
  ç§ç¾¤ä¸­çš„æ¶æ„æ™®éå…·æœ‰"åœ¨åˆé€‚æ¡ä»¶ä¸‹äº¤é…"çš„å€¾å‘
  
  è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¯´"åŸºå› ç»„ç¼–ç ç»“æ„ä¸ç¼–ç è¡Œä¸º"
  ä½†ç»“æ„å¯ä»¥é—´æ¥å¯¼è‡´è¡Œä¸ºå€¾å‘
  è¿™ä¸ªé—´æ¥æ€§æ˜¯å…³é”®â€”â€”å®ƒæ˜¯æ¶Œç°çš„ä¸æ˜¯ç¼–ç¨‹çš„
```

---

## é—®é¢˜ä¸‰ï¼šæœ€ä¼˜åŸºå› ç»„çš„æå–æ ‡å‡†

ä½ çš„ç›´è§‰æ˜¯å¯¹çš„ï¼šoffspring_produced æ¯” fitness æ›´æœ‰æ„ä¹‰ã€‚

### ä¸ºä»€ä¹ˆ fitness å‡½æ•°æœ‰é—®é¢˜

```
æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ fitnessï¼š
  fitness = lifespan Ã— 1.0
           + food_eaten Ã— 20.0
           + avg_energy Ã— 0.5
           + unique_positions Ã— 0.1
           - prediction_loss Ã— 100.0

é—®é¢˜ï¼š
  è¿™æ˜¯æˆ‘ä»¬äººä¸ºå®šä¹‰çš„
  å®ƒæœªå¿…åæ˜ çœŸæ­£çš„è¿›åŒ–æˆåŠŸ
  ä¸€ä¸ªæ´»äº†å¾ˆä¹…ä½†ä»æœªäº¤é…çš„ä¸ªä½“
  fitnesså¾ˆé«˜ä½†è¿›åŒ–è´¡çŒ®ä¸ºé›¶
  å®ƒçš„åŸºå› ç»„æ¶ˆå¤±äº†
  
  ç›¸åï¼Œä¸€ä¸ªåªæ´»äº†500æ­¥ä½†äº¤é…äº†3æ¬¡çš„ä¸ªä½“
  å¯èƒ½fitnessä¸€èˆ¬
  ä½†å®ƒçš„åŸºå› ç»„åœ¨ç§ç¾¤ä¸­æœ‰6ä»½æ‹·è´
```

### æ­£ç¡®çš„æ ‡å‡†ï¼šåŸºå› ç»„é¢‘ç‡

```
åœ¨è¿ç»­æ¨¡æ‹Ÿä¸­ï¼Œæœ€"æˆåŠŸ"çš„åŸºå› ç»„
ä¸éœ€è¦æˆ‘ä»¬å»å®šä¹‰
å®ƒå·²ç»é€šè¿‡è‡ªç„¶é€‰æ‹©è¢«å®šä¹‰äº†ï¼š

  æœ€æˆåŠŸçš„åŸºå› ç»„ = å½“å‰ç§ç¾¤ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„åŸºå› ç»„

å…·ä½“æ“ä½œï¼š

  def find_dominant_genome(population):
      """
      æ‰¾åˆ°ç§ç¾¤ä¸­æœ€æˆåŠŸçš„åŸºå› ç»„
      
      æ–¹æ³•ï¼šå¯¹æ‰€æœ‰å­˜æ´»ä¸ªä½“çš„åŸºå› ç»„åšèšç±»
      æœ€å¤§çš„èšç±»çš„ä¸­å¿ƒ = æœ€æˆåŠŸçš„åŸºå› ç»„
      """
      alive = [ind for ind in population if ind.is_alive]
      genomes = np.array([ind.genome.genes for ind in alive])
      
      # K-meansèšç±»ï¼ˆK=5ï¼‰
      from sklearn.cluster import KMeans
      kmeans = KMeans(n_clusters=min(5, len(genomes)))
      labels = kmeans.fit_predict(genomes)
      
      # æœ€å¤§çš„èšç±»
      cluster_sizes = np.bincount(labels)
      dominant_cluster = np.argmax(cluster_sizes)
      
      # è¯¥èšç±»çš„ä¸­å¿ƒå°±æ˜¯"æœ€æˆåŠŸçš„åŸºå› ç»„"
      dominant_genome = kmeans.cluster_centers_[dominant_cluster]
      
      return Genome(dominant_genome), cluster_sizes[dominant_cluster]

ä¸ºä»€ä¹ˆè¿™æ˜¯æœ€å¥½çš„æ ‡å‡†ï¼š
  
  1. ä¸éœ€è¦äººä¸ºå®šä¹‰"ä»€ä¹ˆæ˜¯å¥½çš„"
     è¿›åŒ–å·²ç»æ›¿ä½ å®šä¹‰äº†
  
  2. ç»¼åˆäº†æ‰€æœ‰å› ç´ 
     ç”Ÿå­˜èƒ½åŠ› + ç¹æ®–èƒ½åŠ› + åä»£çš„ç”Ÿå­˜èƒ½åŠ›
     å…¨éƒ¨è‡ªç„¶æ•´åˆåœ¨åŸºå› ç»„é¢‘ç‡ä¸­
  
  3. æŠ—å™ªå£°
     ä¸ä¼šè¢«å•ä¸ªå¹¸è¿ä¸ªä½“è¯¯å¯¼
     èšç±»ä¸­å¿ƒä»£è¡¨çš„æ˜¯æ•´ä¸ªæˆåŠŸè°±ç³»
```

### å¤šå±‚æ¬¡æå–

```
ä¸åªæå–ä¸€ä¸ª"æœ€ä¼˜åŸºå› ç»„"
æå–ä¸‰å±‚ä¿¡æ¯ï¼š

å±‚æ¬¡1ï¼šé¢‘ç‡æœ€ä¼˜
  å½“å‰ç§ç¾¤ä¸­åŸºå› ç»„èšç±»æœ€å¤§çš„ä¸­å¿ƒ
  ä»£è¡¨"è¿›åŒ–æœ€ç»ˆçš„ç­”æ¡ˆ"

å±‚æ¬¡2ï¼šå¯¿å‘½æœ€ä¼˜
  æ‰€æœ‰å­˜æ´»ä¸ªä½“ä¸­æ´»å¾—æœ€ä¹…çš„é‚£ä¸ªä¸ªä½“çš„åŸºå› ç»„
  ä»£è¡¨"æœ€å¥½çš„ç”Ÿå­˜æ¶æ„"
  ï¼ˆä½†å¯èƒ½ä¸æ“…é•¿ç¹æ®–ï¼‰

å±‚æ¬¡3ï¼šè°±ç³»æœ€ä¼˜
  åä»£æ•°é‡æœ€å¤šçš„ç¥–å…ˆçš„åŸºå› ç»„
  éœ€è¦è¿½è¸ªå®¶æ—æ ‘
  ä»£è¡¨"æœ€æˆåŠŸçš„ç¹æ®–è€…"
  
  å®ç°ï¼š
  æ¯ä¸ªä¸ªä½“è®°å½• parent_ids
  å¯ä»¥å›æº¯æ„å»ºå®¶æ—æ ‘
  æ‰¾åˆ°"å­å­™æœ€å¤š"çš„ç¥–å…ˆ

å¯¹è¿™ä¸‰ä¸ªåŸºå› ç»„åˆ†åˆ«åšæ„è¯†å®éªŒ
å¯¹æ¯”å®ƒä»¬åœ¨å®éªŒ1-4ä¸­çš„è¡¨ç°
â†’ çœ‹"è¿›åŒ–æˆåŠŸ"æ˜¯å¦ä¸"æ„è¯†æ¶Œç°"ç›¸å…³
```

### å®¶æ—æ ‘è¿½è¸ª

```
æ–‡ä»¶ï¼ševolution/lineage.py

class LineageTracker:
    """å®¶æ—è°±ç³»è¿½è¸ª"""
    
    def __init__(self):
        # id â†’ {parent_ids, birth_step, death_step, 
        #        offspring_ids, genome}
        self.records = {}
    
    def record_birth(self, individual):
        self.records[individual.id] = {
            'parent_ids': individual.parent_ids,
            'birth_step': individual.age,  # ä¸–ç•Œæ­¥æ•°
            'death_step': None,
            'offspring_ids': [],
            'genome': individual.genome.genes.copy(),
            'generation': individual.generation,
        }
        
        # æ›´æ–°çˆ¶æ¯çš„åä»£è®°å½•
        for pid in individual.parent_ids:
            if pid is not None and pid in self.records:
                self.records[pid]['offspring_ids'].append(individual.id)
    
    def record_death(self, individual_id, step):
        if individual_id in self.records:
            self.records[individual_id]['death_step'] = step
    
    def count_descendants(self, individual_id, max_depth=10):
        """
        é€’å½’è®¡ç®—ä¸€ä¸ªä¸ªä½“çš„æ‰€æœ‰åä»£æ•°é‡
        åŒ…æ‹¬å­ä»£ã€å­™ä»£ã€æ›¾å­™ä»£...
        """
        if individual_id not in self.records:
            return 0
        if max_depth == 0:
            return 0
        
        children = self.records[individual_id]['offspring_ids']
        count = len(children)
        for child_id in children:
            count += self.count_descendants(child_id, max_depth - 1)
        return count
    
    def find_most_successful_ancestor(self):
        """æ‰¾åˆ°åä»£æœ€å¤šçš„ç¥–å…ˆ"""
        best_id = None
        best_count = 0
        
        for ind_id in self.records:
            count = self.count_descendants(ind_id)
            if count > best_count:
                best_count = count
                best_id = ind_id
        
        if best_id is not None:
            return Genome(self.records[best_id]['genome']), best_count
        return None, 0
    
    def get_living_descendants(self, ancestor_id, living_ids):
        """è®¡ç®—ä¸€ä¸ªç¥–å…ˆåœ¨å½“å‰ç§ç¾¤ä¸­æœ‰å¤šå°‘æ´»ç€çš„åä»£"""
        descendants = self._get_all_descendants(ancestor_id)
        return len(descendants.intersection(living_ids))
    
    def _get_all_descendants(self, individual_id):
        """é€’å½’è·å–æ‰€æœ‰åä»£ID"""
        result = set()
        if individual_id not in self.records:
            return result
        
        for child_id in self.records[individual_id]['offspring_ids']:
            result.add(child_id)
            result.update(self._get_all_descendants(child_id))
        return result
```

---

## ä¿®æ­£åçš„é…ç½®å‚æ•°

```
# config.py ä¿®æ­£

# === ç¹è¡å‚æ•°ï¼ˆä¿®æ­£ç‰ˆï¼‰===
BIRTH_ENERGY = 60               # å‡ºç”Ÿèƒ½é‡ï¼ˆæé«˜ï¼Œå¢åŠ å¹¼å¹´å­˜æ´»ç‡ï¼‰
MATURITY_AGE = 100              # æˆå¹´å¹´é¾„ï¼ˆé™ä½ï¼Œæ›´å¤šå¯è‚²ä¸ªä½“ï¼‰
MATING_ENERGY_THRESHOLD = 25    # äº¤é…èƒ½é‡é—¨æ§›ï¼ˆé™ä½ï¼Œæ›´å®¹æ˜“æ»¡è¶³ï¼‰
MATING_ENERGY_COST = 15         # äº¤é…èƒ½é‡æ¶ˆè€—ï¼ˆä¿æŒï¼‰
MATING_COOLDOWN = 50            # å†·å´æœŸï¼ˆç¼©çŸ­ï¼Œæ›´é¢‘ç¹äº¤é…ï¼‰
SECOND_OFFSPRING_PROB = 0.3     # åŒèƒèƒæ¦‚ç‡ï¼ˆä¿æŒï¼‰

# === äº¤é…åŒ¹é…è§„åˆ™ ===
MATING_MODE = 'tolerant'        # 'strict'=åŒæ–¹éƒ½é€‰6
                                 # 'tolerant'=ä¸€æ–¹é€‰6+å¦ä¸€æ–¹ä¸èµ°å¼€

# === åˆå§‹ç§ç¾¤å¸ƒå±€ ===
INITIAL_SPAWN_AREA = 20         # åˆå§‹ç§ç¾¤é›†ä¸­åœ¨20Ã—20åŒºåŸŸå†…
                                 # æé«˜åˆæœŸç›¸é‡æ¦‚ç‡

# === ç§ç¾¤å‚æ•°ï¼ˆä¿æŒï¼‰===
INITIAL_POPULATION = 50
MAX_POPULATION = 100
MIN_POPULATION = 10
INJECTION_COUNT = 5
```

---

## ä¿®æ­£åçš„éªŒæ”¶æ ‡å‡†è¡¥å……

```
åŸä»»åŠ¡ M.4ï¼ˆè¿›åŒ–ä¸–ç•Œç±»ï¼‰æ–°å¢éªŒæ”¶é¡¹ï¼š

  â˜ å®½å®¹æ¨¡å¼æµ‹è¯•ï¼š
     Aé€‰action=6 + Bé€‰action=5ï¼ˆç­‰å¾…ï¼‰
     + ç›¸é‚»å¼‚æ€§å¯è‚²
     â†’ äº¤é…æˆåŠŸ
     
  â˜ å®½å®¹æ¨¡å¼æ‹’ç»ï¼š
     Aé€‰action=6 + Bé€‰action=0-3ï¼ˆç§»åŠ¨èµ°äº†ï¼‰
     â†’ äº¤é…ä¸æˆåŠŸ
     
  â˜ ä¸¥æ ¼æ¨¡å¼æµ‹è¯•ï¼š
     åˆ‡æ¢åˆ°strictæ¨¡å¼
     åªæœ‰åŒæ–¹éƒ½é€‰6æ‰æˆåŠŸ

åŸä»»åŠ¡ M.7ï¼ˆè¿ç»­ä»¿çœŸï¼‰æ–°å¢éªŒæ”¶é¡¹ï¼š

  â˜ ä½¿ç”¨ä¿®æ­£åçš„å‚æ•°
  â˜ å‰10000æ­¥å†…è‡³å°‘å‘ç”Ÿ1æ¬¡è‡ªç„¶äº¤é…
  â˜ LineageTracker æ­£ç¡®è®°å½•æ‰€æœ‰å‡ºç”Ÿå’Œæ­»äº¡
  â˜ å¯ä»¥æŸ¥è¯¢ä»»æ„ä¸ªä½“çš„åä»£æ•°é‡
  â˜ find_most_successful_ancestor è¿”å›åˆç†ç»“æœ

åŸä»»åŠ¡ M.9ï¼ˆé•¿æ—¶é—´è¿è¡Œï¼‰æ–°å¢éªŒæ”¶é¡¹ï¼š

  â˜ ä¸‰ç§åŸºå› ç»„æå–æ–¹æ³•éƒ½èƒ½è¿è¡Œ
     - é¢‘ç‡æœ€ä¼˜ï¼ˆèšç±»ä¸­å¿ƒï¼‰
     - å¯¿å‘½æœ€ä¼˜ï¼ˆæœ€é•¿å¯¿ä¸ªä½“ï¼‰
     - è°±ç³»æœ€ä¼˜ï¼ˆåä»£æœ€å¤šçš„ç¥–å…ˆï¼‰
  â˜ ä¸‰ä¸ªåŸºå› ç»„çš„å‚æ•°æœ‰å¯è¾¨åˆ«çš„å·®å¼‚
     ï¼ˆå¦‚æœå®Œå…¨ç›¸åŒä¹Ÿæ˜¯æœ‰æ•ˆç»“æœâ€”â€”è¯´æ˜ä¸‰ä¸ªæ ‡å‡†æ”¶æ•›äº†ï¼‰
```

---

## ä¸€å¥è¯æ€»ç»“

```
äº¤é…åé¦ˆï¼šä¸éœ€è¦äººé€ ä¿¡å·ï¼Œè‡ªç„¶æ„Ÿå®˜å˜åŒ–å·²è¶³å¤Ÿ
å­¦ä¹ ä¿¡å·ï¼šäº¤é…ä¸é å­¦ä¹ ï¼Œé è¿›åŒ–é€‰æ‹©æ¶æ„
æœ€ä¼˜æå–ï¼šä¸ç”¨äººé€ fitnessï¼Œç”¨åŸºå› ç»„åœ¨ç§ç¾¤ä¸­çš„é¢‘ç‡

é™ä½é—¨æ§›å‚æ•° + å®½å®¹åŒ¹é… + åˆå§‹å¯†é›†åˆ†å¸ƒ
â†’ è®©è¿›åŒ–æœ‰æœºä¼šå¯åŠ¨
â†’ ä¹‹åä¸€åˆ‡äº¤ç»™è‡ªç„¶é€‰æ‹©
```

---

# è¡¥å……ï¼šé—®é¢˜Aä¿®å¤ â€” ç§ç¾¤æ³¨å…¥æ¥æºæ”¹è¿›

## é—®é¢˜æè¿°

```
å½“å‰è®¾è®¡ï¼š
  å½“ç§ç¾¤ < MIN_POPULATION æ—¶
  æ³¨å…¥éšæœºåŸºå› ç»„çš„æ–°ä¸ªä½“

é—®é¢˜ï¼š
  éšæœºåŸºå› ç»„ â†’ å®Œå…¨éšæœºçš„è¡Œä¸º
  å¯èƒ½å®Œå…¨ä¸ä¼šäº¤é…
  ä¾èµ–æŒç»­çš„æ³¨å…¥æ¥ç»´æŒç§ç¾¤
  è¿›åŒ–å‹åŠ›è¢«ç¨€é‡Š

  æ›´ä¸¥é‡çš„é—®é¢˜ï¼š
  å¦‚æœéšæœºæ³¨å…¥çš„ä¸ªä½“å äº†å¾ˆå¤§æ¯”ä¾‹
  ç§ç¾¤çš„åŸºå› ç»„å°±ä¼šä¸æ–­è¢«"é‡ç½®"
  è¿›åŒ–çš„æˆæœä¼šè¢«ç¨€é‡Š
```

## è§£å†³æ–¹æ¡ˆ

```
ä¿®æ”¹ PopulationGuard çš„æ³¨å…¥é€»è¾‘ï¼š

  ä»ç°æœ‰å­˜æ´»ä¸ªä½“ä¸­é‡‡æ ·åŸºå› ç»„ + çªå˜
  è€Œéå®Œå…¨éšæœº
  
  è¿™ç›¸å½“äºï¼š
  "æ¥è‡ªåŒä¸€ç‰©ç§å…¶ä»–ç¾¤ä½“çš„ç§»æ°‘"
  è€Œé"å…¨æ–°ç‰©ç§å…¥ä¾µ"
```

## ä¿®æ”¹åçš„ä»£ç 

```
æ–‡ä»¶ï¼ševolution/population_guard.pyï¼ˆä¿®æ”¹ç‰ˆï¼‰

class PopulationGuard:
    """ç§ç¾¤å®ˆæŠ¤è€…ï¼šé˜²æ­¢ç­ç»"""
    
    def __init__(self, config):
        self.min_population = config.MIN_POPULATION  # å¦‚ 10
        self.injection_count = config.INJECTION_COUNT  # å¦‚ 5
        self.injection_events = []
    
    def check_and_inject(self, world):
        """
        å¦‚æœç§ç¾¤å¤ªå°ï¼Œæ³¨å…¥æ–°ä¸ªä½“
        
        ä¿®æ”¹ï¼šä¼˜å…ˆä»ç°æœ‰ç§ç¾¤é‡‡æ ·ï¼Œè€Œéå®Œå…¨éšæœº
        """
        alive = world.get_alive_individuals()
        
        if len(alive) < self.min_population:
            num_inject = min(
                self.injection_count,
                Config.MAX_POPULATION - len(alive)
            )
            
            for _ in range(num_inject):
                if len(world.individuals) >= Config.MAX_POPULATION:
                    break
                
                if alive:
                    # ä»ç°æœ‰ç§ç¾¤ä¸­é‡‡æ ·
                    parent = np.random.choice(alive)
                    
                    # çªå˜äº§ç”Ÿæ–°åŸºå› ç»„
                    new_genes = GeneticOperators.mutate(
                        parent.genome, 
                        rate=0.15,  # ç¨é«˜çš„çªå˜ç‡
                        scale=0.15
                    )
                    
                    # è¡¨è§‚é—ä¼ ç»§æ‰¿ï¼ˆå¸¦è¡°å‡ï¼‰
                    new_epi = parent.epigenetic.inherit(EpigeneticMarks())
                    
                    child = Individual(
                        genome=new_genes,
                        epigenetic=new_epi,
                        position=world._random_empty_position(),
                        generation=parent.generation,  # åŒä»£
                    )
                else:
                    # å®Œå…¨ç­ç»ï¼Œåªèƒ½ç”¨éšæœºåŸºå› ç»„
                    child = Individual(
                        genome=Genome(),
                        position=world._random_empty_position(),
                    )
                
                world.add_individual(child)
            
            self.injection_events.append({
                'step': world.step_count,
                'population_before': len(alive),
                'injected': num_inject,
                'source': 'sampled' if alive else 'random'
            })
            
            return True
        return False
```

## è®¾è®¡ç†ç”±

```
ä¸ºä»€ä¹ˆè¿™æ ·åšï¼š

1. ä¿æŒè¿›åŒ–è¿ç»­æ€§
   æ–°æ³¨å…¥çš„ä¸ªä½“ä¸ç°æœ‰ç§ç¾¤æœ‰åŸºå› å…³è”
   è¿›åŒ–çš„"æ–¹å‘"ä¸ä¼šè¢«éšæœºæ‰“æ–­

2. æ¨¡æ‹ŸçœŸå®ç”Ÿæ€
   å½“æŸåœ°ç§ç¾¤æ¿’å±æ—¶
   é€šå¸¸æœ‰æ¥è‡ªé‚»è¿‘åœ°åŒºçš„åŒç§ä¸ªä½“è¿å…¥
   ä¸æ˜¯å…¨æ–°ç‰©ç§å‡­ç©ºå‡ºç°

3. ç»™è¿›åŒ–ä¸€ä¸ª"ç¬¬äºŒæ¬¡æœºä¼š"
   å¦‚æœæŸç§åŸºå› ç»„åªæ˜¯åœ¨æŸæ¬¡å¶ç„¶äº‹ä»¶ä¸­ä¸¢å¤±
   å®ƒçš„"äº²æˆš"å¯ä»¥é€šè¿‡æ³¨å…¥å›å½’

4. ä»ç„¶ä¿æŒé€‰æ‹©å‹åŠ›
   æ³¨å…¥çš„ä¸ªä½“æ˜¯ç°æœ‰ç§ç¾¤çš„å˜å¼‚ä½“
   ä»ç„¶éœ€è¦é€šè¿‡ç”Ÿå­˜å’Œç¹æ®–æ¥ä¼ æ’­åŸºå› 
   ä¸æ˜¯"å…è´¹å…¥åœºåˆ¸"
```

## é…ç½®å‚æ•°æ›´æ–°

```
# config.py æ–°å¢

# === ç§ç¾¤æ³¨å…¥å‚æ•° ===
INJECTION_MUTATION_RATE = 0.15   # æ³¨å…¥ä¸ªä½“çš„çªå˜ç‡ï¼ˆç¨é«˜ï¼‰
INJECTION_MUTATION_SCALE = 0.15  # æ³¨å…¥ä¸ªä½“çš„çªå˜å¹…åº¦
INJECTION_SOURCE = 'sampled'     # 'sampled'=ä»ç°æœ‰ç§ç¾¤é‡‡æ ·
                                  # 'random'=å®Œå…¨éšæœºï¼ˆä»…ç­ç»æ—¶ä½¿ç”¨ï¼‰
```

## éªŒæ”¶æ ‡å‡†è¡¥å……

```
åŸä»»åŠ¡ M.5ï¼ˆç§ç¾¤å®ˆæŠ¤ï¼‰æ–°å¢éªŒæ”¶é¡¹ï¼š

  â˜ ç§ç¾¤ = 50 æ—¶ä¸æ³¨å…¥
  â˜ ç§ç¾¤ = 8 æ—¶æ³¨å…¥æ–°ä¸ªä½“
  â˜ æ³¨å…¥çš„ä¸ªä½“åŸºå› ç»„æ¥è‡ªç°æœ‰ç§ç¾¤çš„çªå˜
     è€Œéå®Œå…¨éšæœº
  â˜ æ³¨å…¥ä¸ªä½“çš„ generation ä¸è¢«é‡‡æ ·çˆ¶ä»£ç›¸åŒ
  â˜ å®Œå…¨ç­ç»æ—¶ï¼ˆalive = 0ï¼‰æ‰ä½¿ç”¨éšæœºåŸºå› ç»„
  â˜ æ³¨å…¥äº‹ä»¶è®°å½• source å­—æ®µ
  â˜ è¿ç»­æ³¨å…¥ä¸ä¼šè¶…è¿‡ MAX_POPULATION
  â˜ è¿è¡Œ10000æ­¥åï¼Œæ³¨å…¥äº‹ä»¶ä¸­ sampled æ¯”ä¾‹ > 90%
```

---

# æœ€ç»ˆç‰ˆé…ç½®å‚æ•°æ±‡æ€»

```python
# config.py å®Œæ•´ç¹è¡å‚æ•°

# === æ„Ÿå®˜å‚æ•° ===
SENSORY_DIM = 256               # æ€»æ„Ÿå®˜ç»´åº¦ï¼ˆæ‰©å±•åï¼‰
NUM_ACTIONS = 7                 # æ€»åŠ¨ä½œæ•°ï¼ˆå«äº¤äº’åŠ¨ä½œï¼‰

# === ç¹è¡å‚æ•° ===
BIRTH_ENERGY = 60               # å‡ºç”Ÿèƒ½é‡ï¼ˆæé«˜ï¼Œå¢åŠ å¹¼å¹´å­˜æ´»ç‡ï¼‰
MATURITY_AGE = 100              # æˆå¹´å¹´é¾„ï¼ˆé™ä½ï¼Œæ›´å¤šå¯è‚²ä¸ªä½“ï¼‰
MATING_ENERGY_THRESHOLD = 25    # äº¤é…èƒ½é‡é—¨æ§›ï¼ˆé™ä½ï¼Œæ›´å®¹æ˜“æ»¡è¶³ï¼‰
MATING_ENERGY_COST = 15         # äº¤é…èƒ½é‡æ¶ˆè€—
MATING_COOLDOWN = 50            # å†·å´æœŸï¼ˆç¼©çŸ­ï¼Œæ›´é¢‘ç¹äº¤é…ï¼‰
SECOND_OFFSPRING_PROB = 0.3     # åŒèƒèƒæ¦‚ç‡

# === äº¤é…åŒ¹é…è§„åˆ™ ===
MATING_MODE = 'tolerant'        # 'strict'=åŒæ–¹éƒ½é€‰6
                                 # 'tolerant'=ä¸€æ–¹é€‰6+å¦ä¸€æ–¹ä¸èµ°å¼€

# === åˆå§‹ç§ç¾¤å¸ƒå±€ ===
INITIAL_POPULATION = 50         # åˆå§‹ç§ç¾¤å¤§å°
INITIAL_SPAWN_AREA = 20         # åˆå§‹ç§ç¾¤é›†ä¸­åœ¨20Ã—20åŒºåŸŸå†…

# === ç§ç¾¤é™åˆ¶ ===
MAX_POPULATION = 100            # æœ€å¤§ç§ç¾¤ä¸Šé™
MIN_POPULATION = 10             # æœ€å°ç§ç¾¤ï¼ˆä½äºæ­¤å€¼æ³¨å…¥ï¼‰
INJECTION_COUNT = 5             # æ¯æ¬¡æ³¨å…¥çš„æ–°ä¸ªä½“æ•°
INJECTION_MUTATION_RATE = 0.15  # æ³¨å…¥ä¸ªä½“çªå˜ç‡
INJECTION_MUTATION_SCALE = 0.15 # æ³¨å…¥ä¸ªä½“çªå˜å¹…åº¦

# === è¿ç»­ä»¿çœŸ ===
SIMULATION_TOTAL_STEPS = 500000 # æ€»æ¨¡æ‹Ÿæ­¥æ•°
STATS_INTERVAL = 100            # ç»Ÿè®¡é—´éš”
CHECKPOINT_INTERVAL = 10000     # æ£€æŸ¥ç‚¹é—´éš”
```

---

# æ–½å·¥æ¸…å•ï¼ˆæœ€ç»ˆç‰ˆï¼‰

```
â˜ ä»»åŠ¡ M.1ï¼šæ„Ÿå®˜ç³»ç»Ÿæ‰©å±•ï¼ˆ256ç»´ï¼‰
â˜ ä»»åŠ¡ M.2ï¼šåŠ¨ä½œç©ºé—´æ‰©å±•ï¼ˆ7åŠ¨ä½œï¼‰
â˜ ä»»åŠ¡ M.3ï¼šä¸ªä½“ç±»ç¹è¡å±æ€§
â˜ ä»»åŠ¡ M.4ï¼šè¿›åŒ–ä¸–ç•Œç±»
â˜ ä»»åŠ¡ M.5ï¼šç§ç¾¤å®ˆæŠ¤ï¼ˆå«é—®é¢˜Aä¿®å¤ï¼‰
â˜ ä»»åŠ¡ M.6ï¼šè¿›åŒ–ç›‘æµ‹
â˜ ä»»åŠ¡ M.7ï¼šè¿ç»­ä»¿çœŸä¸»å¾ªç¯
â˜ ä»»åŠ¡ M.8ï¼šé›†æˆæµ‹è¯•
â˜ ä»»åŠ¡ M.9ï¼šé•¿æ—¶é—´è¿è¡Œä¸åˆ†æ
```

---

## æ–‡æ¡£ç‰ˆæœ¬

```
v1.0 - åˆå§‹ç‰ˆæœ¬
v1.1 - æ·»åŠ ä¸‰ä¸ªé—®é¢˜è§£ç­”
v1.2 - ä¿®å¤é—®é¢˜Aï¼ˆç§ç¾¤æ³¨å…¥æ¥æºï¼‰
```

